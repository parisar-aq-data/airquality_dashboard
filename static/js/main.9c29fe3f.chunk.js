(this.webpackJsonpairquality_dashboard=this.webpackJsonpairquality_dashboard||[]).push([[0],{255:function(t,e,r){},323:function(t,e,r){"use strict";r.r(e);var a=r(16),n=r.n(a),s=r(15),o=r.n(s),i=r(36),c=r(23),l=r(24),d=r(27),u=r(28),h=r(0),p=r.n(h),f=(r(255),r(134),"https://server2.nikhilvj.co.in/airdata_api/API/"),j=f.concat("rankedPm25Units"),b=f.concat("getWardOrMonitorHistory"),m=f.concat("wardPolygons"),y=f.concat("wardOrMonitorSummary"),O=f.concat("wardsAndMonitors"),x=f.concat("pollutantHistory"),g=(f.concat("wardCentroids"),r(10)),v=r(1);function M(t){var e=t.children,r=Object(h.useState)(0),a=Object(g.a)(r,2),n=a[0],s=a[1],o=Object(h.useState)(0),i=Object(g.a)(o,2),c=i[0],l=i[1],d=Object(h.useRef)();Object(h.useEffect)((function(){d.current&&(s(d.current.offsetWidth),l(d.current.offsetHeight))}),[]);var u=p.a.cloneElement(e,{width:n,height:c});return Object(v.jsx)("div",{className:"svgcontainer ".concat(t.styleName),ref:d,children:u})}var w=r(138),S=r(333),C=r(334),k=r(335),D=r(346),W=r(336),P=r(347),A=r(337),N=r(338),_=r(18),R=r.n(_);r(257);function T(t){var e=Object(S.a)(),r=t.wardsAndMonitors.find((function(e){return e.name.toUpperCase()===t.selectedWardOrMonitor.toUpperCase()})),a=[parseFloat(r.lat),parseFloat(r.lon)],n=a[0],s=a[1];return e.setView([n,s],14),null}function F(t){return Object(S.a)().setView([18.502,73.853],12),null}function B(t){Object(w.a)(t);var e=Object(S.a)(),r=function(t){return t?t>250?"#810100":t>120?"#c41206":t>90?"#f58f09":t>60?"#CCA88A":t>30?"#1E5E64":"#50C3CD":"#ededed"};return Object(h.useEffect)((function(){if(e){var t=R.a.control({position:"bottomleft"});t.onAdd=function(){var t,e,a=R.a.DomUtil.create("div","info legend"),n=["NA",0,30,60,90,120,250],s=["Not Available","Good","Satisfactory","Moderate","Poor","Very Poor","Severe"],o=[];o.push("<h5>PM 2.5</h5>");for(var i=0;i<n.length;i++)t=n[i],e=n[i+1],"NA"===n[i]?o.push('<i style="background:'+r(null)+'"></i> '+t+" : &nbsp;&nbsp;"+s[i]):o.push('<i style="background:'+r(t+1)+'"></i> '+t+(e?"&ndash;"+e:"+")+"&nbsp;&nbsp;"+s[i]);return a.innerHTML=o.join("<br>"),a},t.addTo(e)}}),[e]),null}function H(t){var e=[],r=[],a=[],n=[],s=[];if(t.shapes){e=t.shapes.features;for(var o=0;o<e.length;o++)for(var i=e[o].geometry.coordinates[0],c=0;c<i.length;c++)i[c].reverse();e.forEach((function(t,e){var a;r.push(Object(v.jsx)(C.a,{pathOptions:{color:"#777",fillColor:(a=t.properties.average_daily_pm25,a?a>250?"#810100":a>120?"#c41206":a>90?"#f58f09":a>60?"#CCA88A":a>30?"#1E5E64":"#50C3CD":"#ededed"),fillOpacity:.5},positions:t.geometry.coordinates[0],children:Object(v.jsxs)(k.a,{sticky:!0,children:["WARD ",Object(v.jsx)("br",{}),t.properties.name," ",Object(v.jsx)("br",{}),t.properties.name_mr," ",Object(v.jsx)("br",{}),"PM2.5 :  ",Number(parseFloat(t.properties.average_daily_pm25)).toFixed(2)]})},e))}))}if(t.monitors){var l={color:"#3885e7",fillColor:"#3885e7"},d={color:"#c738e7",fillColor:"#c738e7"},u={color:"#1eb708",fillColor:"#1eb708"};t.monitors.filter((function(t){return"iudx"===t.type})).forEach((function(t,e){a.push(Object(v.jsx)(D.a,{center:[t.lat,t.lon],pathOptions:l,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["IUDX Monitor ",Object(v.jsx)("br",{}),t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))})),t.monitors.filter((function(t){return"safar"===t.type})).forEach((function(t,e){n.push(Object(v.jsx)(D.a,{center:[t.lat,t.lon],pathOptions:d,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["Safar Monitor ",Object(v.jsx)("br",{})," ",t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))})),t.monitors.filter((function(t){return"mpcb"===t.type})).forEach((function(t,e){s.push(Object(v.jsx)(D.a,{center:[t.lat,t.lon],pathOptions:u,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["MPCB Monitor ",Object(v.jsx)("br",{})," ",t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))}))}return Object(v.jsxs)(W.a,{className:"map_tool",scrollWheelZoom:!1,children:[t.panCityView?Object(v.jsx)(F,{features:e}):Object(v.jsx)(T,{wardsAndMonitors:t.monitors,selectedWardOrMonitor:t.selectedWardOrMonitor}),Object(v.jsx)(P.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r,Object(v.jsxs)(A.a,{position:"bottomright",children:[Object(v.jsx)(A.a.Overlay,{checked:"IUDX"===t.selectedMode.type,name:"Smart City Monitors",children:Object(v.jsx)(N.a,{children:a})}),Object(v.jsx)(A.a.Overlay,{checked:"SAFAR"===t.selectedMode.type,name:"Safar Monitors",children:Object(v.jsx)(N.a,{children:n})}),Object(v.jsx)(A.a.Overlay,{checked:"MPCB"===t.selectedMode.type,name:"MPCB Monitors",children:Object(v.jsx)(N.a,{children:s})})]}),Object(v.jsx)(B,{})]})}var V=r(8);function E(t){var e=t.width,r=t.height,a=Object(h.useRef)(null),n=e,s=n/4,o=r,i=[];if(t.wardOrMonitorSummary.length>0){var c=t.wardOrMonitorSummary[0];i=[{index:0,metric:c.num_missing_days,tag:"days of missing data"},{index:1,metric:c.pollution_rank.toString()+"/"+c.num_units.toString(),tag:"Pollution Rank"},{index:2,metric:c.count_exceeds_threshold,tag:"number of days exceeding threshold of 30 PM2.5"}]}function l(t,e){t.each((function(){for(var t,r=V.m(this),a=r.text().split(/\s+/).reverse(),n=[],s=0,o=r.attr("y"),i=parseFloat(r.attr("dy")),c=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",i+"em");t=a.pop();)n.push(t),c.text(n.join(" ")),c.node().getComputedTextLength()>e&&(n.pop(),c.text(n.join(" ")),n=[t],c=r.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++s+i+"em").text(t))}))}return Object(h.useEffect)((function(){var t=V.m(a.current);t.selectAll("*").remove();var c=o+100;t.attr("viewBox","0 0 "+n+" "+c);var d=V.j().domain(i.map((function(t){return t.index}))).range([s,e]);if(o>0){var u=V.j().domain(i.map((function(t){return t.tag}))).range([0,n]).padding(.2),h=V.b(u);t.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(h).selectAll(".tick text").style("font-size","18px").call(l,u.bandwidth());var p=t.append("g");p.selectAll("circle").data(i).join("circle").attr("cx",(function(t){return u(t.tag)+d.bandwidth()/2})).attr("cy",r/2).attr("r",(function(t){return 90})).attr("fill","#7df9ff"),p.selectAll("text").data(i).join("text").attr("dx",(function(t){return"highest pollution"===t.tag?u(t.tag)+u.bandwidth()/2-52:u(t.tag)+u.bandwidth()/2-40})).attr("dy",r/1.8).text((function(t){return t.metric})).attr("fill","#606161").style("font-size",(function(t){return"highest pollution"===t.tag?"40px":"50px"}))}})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:r,ref:a})]})}function z(t){var e=t.width,r=t.height,a=Object(h.useRef)(null),n=e,s=r,o=10,i=10,c=t.rankedWards,l=[{label:"Lowest",color:"#50C3CD"},{label:"Highest",color:"#BD762D"}];function d(t,e){t.each((function(){for(var t,r=V.m(this),a=r.text().split(/\s+/).reverse(),n=[],s=0,o=r.attr("y"),i=parseFloat(r.attr("dy")),c=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",i+"em");t=a.pop();)n.push(t),c.text(n.join(" ")),c.node().getComputedTextLength()>e&&(n.pop(),c.text(n.join(" ")),n=[t],c=r.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++s+i+"em").text(t))}))}c=c.sort((function(t,e){return t.best-e.best}));return Object(h.useEffect)((function(){var t=V.m(a.current);t.selectAll("*").remove();var r=s+20,u=V.j().domain(c.map((function(t){return t.name}))).range([0,n-i]).padding(.2),h=V.k().domain([0,V.h(c,(function(t){return Number(t.Average_pm25)}))]).range([s,4*o]);t.attr("viewBox","-30 10 "+n+" "+r);var p=V.b(u);if(s>0){t.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p).selectAll(".tick text").call(d,u.bandwidth());var f=V.c(h);t.append("g").call(f),t.append("text").attr("class","y label").attr("text-anchor","start").attr("x",-250).attr("y",-4*o).attr("dy",".75em").attr("fill","#7c7c7c").attr("transform","rotate(-90)").text("Average PM 2.5"),t.selectAll("mybar").data(c).enter().append("rect").attr("x",(function(t){return u(t.name)})).attr("y",(function(t){return h(Number(t.Average_pm25))})).attr("width",u.bandwidth()).attr("height",(function(t){return s-h(Number(t.Average_pm25))})).attr("fill",(function(t){return t.best<4?"#50C3CD":"#BD762D"})),function(t){var r=n/(l.length+1),a=V.k().domain([0,Object.keys(l).length-1]).range([r,e-r]);t.append("g").attr("transform","translate(0,"+s+")").selectAll("text").data(l).join("text").attr("x",(function(t,e){return a(e)})).attr("y",2*o-s).attr("dy","0.5em").text((function(t){return t.label})).attr("font-size","18px").attr("font-weight","bold").attr("fill",(function(t){return t.color}))}(t)}})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:r,ref:a})]})}var I=r(93);function U(t){var e=t.width,r=t.height,a=Object(h.useRef)(null),n=e,s=r,o=10,i=10,c=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=["#4477AA","#EE6677","#228833","#CCBB44","#66CCEE","#AA3377","#BBBBBB"],d=null,u="",p=[];return Object(h.useEffect)((function(){d=t.pollutantHistory,u="MPCB"==t.selectedMode.type?"Monthly Average RSPM":"Monthly Average PM 2.5";var e=V.m(a.current);e.selectAll("*").remove();var r=s+20,h=t.panCityView?V.g(c,(function(t,e){return t})):V.g(d,(function(t,e){return t.Month})),f=V.j(new V.a(h),[0,n-i]),j=V.k().domain([V.i(d,(function(t){return Number(t.monthly_average_pm25)}))-2,V.h(d,(function(t){return Number(t.monthly_average_pm25)}))]).range([s,4*o]);e.attr("viewBox","-30 -2 "+n+" "+r),s>0&&(e.append("g").attr("transform","translate(0,"+s+")").call(V.b(f)),e.append("g").call(V.c(j)),e.append("text").attr("class","y label").attr("text-anchor","start").attr("x",-250).attr("y",-4*o).attr("dy",".75em").attr("fill","#7c7c7c").attr("transform","rotate(-90)").text(u),function(t,e,r){for(var a=Object(I.a)(new Set(V.g(d,(function(t,e){return t.Year})))),n=function(n){var s=d.filter((function(t){return t.Year===a[n]}));s=s.sort((function(t,e){return t.month_number-e.month_number})),t.append("path").datum(s).attr("fill","none").attr("stroke",l[n]).attr("stroke-width",1).attr("d",V.f().x((function(t){return e(t.Month)+e.bandwidth()/2})).y((function(t){return r(Number(t.monthly_average_pm25))}))),t.append("g").selectAll("circle").data(s).enter().append("circle").attr("fill",(function(t){return""!=t.monthly_average_pm25?l[n]:"white"})).attr("stroke",l[n]).attr("stroke-width",1).attr("r",3).attr("cx",(function(t){return e(t.Month)+e.bandwidth()/2})).attr("cy",(function(t){return r(Number(t.monthly_average_pm25))})),p.push({label:a[n].toString(),color:l[n]})},s=0;s<a.length;s++)n(s)}(e,f,j),function(t){var e=p.length+1,r=n/e,a=V.k().domain([0,Object.keys(p).length-1]).range([r,n-r]);t.append("g").attr("transform","translate(0,"+s+")").selectAll("text").data(p).join("text").attr("x",(function(t,e){return a(e)})).attr("y",2*o-s).attr("dy","0.5em").text((function(t){return t.label})).attr("font-size","18px").attr("font-weight","bold").attr("fill",(function(t){return t.color}))}(e))})),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:t.panCityView?"vizTitleLineChartPancity":"vizTitle",children:[t.title,t.panCityView?Object(v.jsxs)("span",{className:"titleNote",children:["\u2003 \u2003","(*This chart is independent of the date range above. Hollow circles = missing data.)"]}):null]}),Object(v.jsx)("svg",{width:e,height:r,ref:a})]})}var J=function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={},a}return Object(l.a)(r,[{key:"render",value:function(){var t=this,e=[],r="WARD";void 0!==this.props.wardPolygons.data&&(e=this.props.wardPolygons.data.filter((function(e){return e.type.toUpperCase()===t.props.selectedMode.type.toUpperCase()})),r="WARD"===this.props.selectedMode.type?"ward":"monitor");var a=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"text_n_map",children:[Object(v.jsxs)("div",{className:"textTool display-linebreak",children:["This dashboard reports PM 2.5 from various data sources available in Pune. The "+this.props.selectedMode.name+" data is collected by "+e.length+" "+r+"s all across Pune.\n",Object(v.jsx)("span",{style:{fontStyle:"italic"},children:" To know more, select your "+r+" from the dropdown above.\n"}),Object(v.jsx)("br",{}),"PM 2.5 (particulate matter), an air pollutant, is very harmful to our health. It not only enters our lungs, but can also enter our bloodstream and affect many of our vital organs like the heart, brain and kidneys."]}),Object(v.jsx)("div",{className:"mapBaap",children:Object(v.jsx)(H,{panCityView:this.props.panCityView,shapes:this.props.wardPolygons.shapes,monitors:this.props.wardPolygons.data,selectedMode:this.props.selectedMode,selectedWardOrMonitor:this.props.selectedWardOrMonitor})})]}),Object(v.jsxs)("div",{className:"bar_n_line",children:[this.props.panCityView?Object(v.jsx)(M,{children:Object(v.jsx)(z,{title:"Top 3 "+("WARD"===this.props.selectedMode.type?"wards":"monitors")+" showing the lowest to highest levels of pm2.5",rankedWards:this.props.rankedWards})}):Object(v.jsx)(M,{children:Object(v.jsx)(E,{title:this.props.selectedWardOrMonitor,selectedMode:this.props.selectedMode,selectedWardOrMonitor:this.props.selectedWardOrMonitor,wardOrMonitorSummary:this.props.wardOrMonitorSummary})}),this.props.panCityView?Object(v.jsx)(M,{children:Object(v.jsx)(U,{title:("MPCB"==this.props.selectedMode.type?"RSPM":"PM2.5")+" across all "+("WARD"==this.props.selectedMode.type?"wards":"monitors")+" in Pune",pollutantHistory:this.props.pollutantHistory,panCityView:this.props.panCityView,selectedMode:this.props.selectedMode})}):Object(v.jsx)(M,{children:Object(v.jsx)(U,{title:"PM2.5 history for "+this.props.selectedMode.type+" "+this.props.selectedWardOrMonitor,pollutantHistory:this.props.wardOrMonitorHistory,panCityView:this.props.panCityView,selectedMode:this.props.selectedMode})})]})]});return Object(v.jsx)("div",{className:"vizpanel",children:a})}}]),r}(p.a.Component),L=r.p+"static/media/ParisarLogo.a617d95d.png",q=r(341),Y=r(343),G=r(342),Q=r(344),X=r(339),Z=r(340),K=r(142),$=r(118),tt=r.n($),et=(r(258),[{name:"Satellite Based",type:"WARD"},{name:"Smart City",type:"IUDX"},{name:"SAFAR",type:"SAFAR"},{name:"MPCB",type:"MPCB"}]),rt=function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).unitSelectRef=null,a.pollutantSelectRef=null,a.setStartDate=function(t){a.props.setStartDate(t)},a.setEndDate=function(t){a.props.setEndDate(t)},a.setSelectedMode=function(t,e){var r=et.find((function(e){return e.name===t.target.value}));a.props.setSelectedMode(r),a.unitSelectRef.state.selectValue.length>0&&a.unitSelectRef.clearValue();var n=a.filterWardsAndMonitors(r);a.setState({selectedDataSourceId:e,filteredMonitors:n})},a.setSelectedWardOrMonitor=function(t){a.props.setSelectedWardOrMonitor(t),a.props.handlePanCityView()},a.state={selectedDataSourceId:0,filteredMonitors:[],wardsAndMonitors:[]},a}return Object(l.a)(r,[{key:"getWardsAndMonitors",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=O,r={method:"GET",headers:{"Content-Type":"application/json"},body:null},t.next=4,fetch(e,r);case 4:return a=t.sent,t.next=7,a.json();case 7:return n=t.sent,console.log(" * * * * WARDS AND MONITORS * * * * ",n),this.setState({wardsAndMonitors:n.data}),t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"filterWardsAndMonitors",value:function(t){return this.state.wardsAndMonitors.filter((function(e){return e.type===t.type}))}},{key:"componentDidMount",value:function(){var t=this;this.state.startDate&&this.state.startDate.setHours(1*this.state.startDate.getTimezoneOffset()/60),this.getWardsAndMonitors().then((function(e){var r=t.filterWardsAndMonitors(et[t.state.selectedDataSourceId]);t.setState({filteredMonitors:r})}))}},{key:"render",value:function(){var t=this,e=Object(v.jsx)(v.Fragment,{children:et.map((function(e,r){return Object(v.jsx)(X.a,{style:{fontSize:"12px"},value:e.name,onClick:function(e){return t.setSelectedMode(e,r)},active:r===t.state.selectedDataSourceId,children:e.name},r)}))});return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"controlpanel",children:[Object(v.jsx)("div",{className:"controlPanelSection1",children:this.props.panCityView?Object(v.jsxs)("div",{className:"panCityControl",style:{zIndex:999},children:[Object(v.jsx)(Z.a,{size:"sm",className:"cp-section1items",children:e}),Object(v.jsx)(K.a,{ref:function(e){t.unitSelectRef=e},className:"cp-section1items datasource-select",isSearchable:!0,placeholder:"Select a ward or monitor",options:this.state.filteredMonitors,onChange:this.setSelectedWardOrMonitor})]}):Object(v.jsxs)("div",{className:"panCityControl",children:[Object(v.jsx)(X.a,{variant:"link",onClick:this.props.handlePanCityView,children:"Back to Pune City"}),Object(v.jsxs)("div",{children:["\u2003 \u2003\u2003 \u2003",et[this.state.selectedDataSourceId].type+"  : "+this.props.selectedWardOrMonitor]})]})}),Object(v.jsxs)("div",{className:"controlPanelSection2",children:[Object(v.jsx)(tt.a,{wrapperClassName:"cp-section2items",dateFormat:"dd/MM/yyyy",selected:this.props.startDate,onChange:function(e){return t.setStartDate(e)}}),Object(v.jsx)("label",{className:"cp-section2items",children:" - "}),Object(v.jsx)(tt.a,{wrapperClassName:"cp-section2items",dateFormat:"dd/MM/yyyy",selected:this.props.endDate,onChange:function(e){return t.setEndDate(e)}}),Object(v.jsx)(X.a,{variant:"dark",size:"sm",className:"cp-section2items",onClick:this.props.updateDates,children:"Update"})]})]})})}}]),r}(p.a.Component),at=r(345),nt=r.p+"static/media/faqs.0759e9e7.csv",st=function(t){var e=Object(h.useState)(!0),r=Object(g.a)(e,2),a=r[0],n=r[1],s=Object(h.useState)(!1),c=Object(g.a)(s,2),l=c[0],d=c[1],u=Object(h.useState)(),p=Object(g.a)(u,2),f=p[0],j=p[1];var b=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.d(nt).then((function(t){j(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(h.useEffect)((function(){f||b()})),f){var m=[];return f.forEach((function(t,e){var r=Object.keys(t).filter((function(e){return e.includes("bullet")&&""!==t[e]}));m.push(Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:t.question},e),Object(v.jsx)("p",{align:"justify",children:t.answer},e),Object(v.jsx)("ul",{children:r.map((function(e,r){return Object(v.jsx)("li",{align:"justify",children:t[e]},r)}))})]},e))})),Object(v.jsxs)("div",{children:[Object(v.jsx)(X.a,{style:{color:"#606161",backgroundColor:"#F8F9F9",borderColor:"#F8F9F9"},onClick:function(){return n(!0),void d(!0)},children:"FAQs"}),Object(v.jsxs)(at.a,{show:l,fullscreen:a,onHide:function(){return d(!1)},children:[Object(v.jsx)(at.a.Header,{closeButton:!0,children:Object(v.jsx)(at.a.Title,{children:"Frequently Asked Questions"})}),Object(v.jsx)(at.a.Body,{children:m})]})]})}return null},ot=r(48),it=r(97),ct=r(98),lt=function(){var t=Object(h.useState)(!1),e=Object(g.a)(t,2),r=e[0],a=e[1];return ot.b.add(ct.b,ct.a,ct.c),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(X.a,{style:{color:"#606161",backgroundColor:"#F8F9F9",borderColor:"#F8F9F9"},onClick:function(){return a(!0)},children:"Contact Us"}),Object(v.jsxs)(at.a,{size:"lg",show:r,onHide:function(){return a(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:[Object(v.jsxs)(at.a.Header,{closeButton:!0,style:{display:"flex"},children:[Object(v.jsx)(at.a.Title,{id:"example-modal-sizes-title-lg",style:{flex:1},children:"Reach out to us"}),Object(v.jsxs)("span",{children:[Object(v.jsx)("a",{href:"https://www.instagram.com/parisar_org/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-instagram",fixedWidth:!0})}),Object(v.jsx)("a",{href:"https://twitter.com/parisarpune",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-twitter",fixedWidth:!0})}),Object(v.jsx)("a",{href:"https://www.facebook.com/ParisarUrbanTransport/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-facebook",fixedWidth:!0,className:"facebook"})})]})]}),Object(v.jsxs)(at.a.Body,{children:["Please send us your questions"," ",Object(v.jsx)("a",{href:"https://parisar.org/contact-us",target:"_blank",rel:"noreferrer",children:"here"}),"."]})]})]})},dt=function(t){Object(d.a)(r,t);var e=Object(u.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).updateDates=function(t){a.get_pm25Ranks(),""!==a.state.selectedWardOrMonitor&&(a.getWardOrMonitorHistory(),a.getWardOrMonitorSummary())},a.handleAlerts=function(t){a.setState({alert:{alertMessage:"",alertRaised:t}})},a.handlePanCityView=function(){a.setState({panCityView:!a.state.panCityView})},a.setSelectedWardOrMonitor=function(t){a.setState({selectedWardOrMonitor:t.value})},a.state={selectedMode:{name:"Satellite Based",type:"WARD"},selectedWardOrMonitor:"",panCityView:!0,pollutantHistory:[],wardOrMonitorHistory:[],wardOrMonitorSummary:[],wardPolygons:[],rankedWards:[],startDate:new Date("2021-04-24"),endDate:new Date,alert:{alertRaised:!1,alertMessage:""}},a}return Object(l.a)(r,[{key:"get_pm25Ranks",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",r={startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode.type},a=j,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t.next=6,fetch(a,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * Ranked "+this.state.selectedMode.name+" received from db * * * * ",i),"success"===i.status?this.setState({rankedWards:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPollutantHistory",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"",e={selectedMode:this.state.selectedMode.type},r=x,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},t.next=6,fetch(r,a);case 6:return n=t.sent,t.next=9,n.json();case 9:s=t.sent,console.log(" * * * * POLLUTANT HISTORY "+this.state.selectedMode.type+"* * * * ",s),this.setState({pollutantHistory:s.data,loading:!1});case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardOrMonitorHistory",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",r={startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode.type,selectedWardOrMonitor:this.state.selectedWardOrMonitor},a=b,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t.next=6,fetch(a,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * History for "+r.selectedMode+r.selectedWardOrMonitor+" received from db * * * * ",i),"success"===i.status?this.setState({wardOrMonitorHistory:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected monitor or ward or the date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardPolygons",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.state.wardPolygons,101===this.state.wardPolygons.length){t.next=13;break}return r=new Date("2021-06-06"),a={date1:r.toISOString().split("T")[0],categories:["iudx","safar","ward","mpcb"]},n=m,s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t.next=8,fetch(n,s);case 8:return i=t.sent,t.next=11,i.json();case 11:e=t.sent,console.log(" * * * * POLYGONS with pollutants received from db * * * * ",e);case 13:this.setState({wardPolygons:e});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardOrMonitorSummary",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,r,a,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",r={startDate:this.state.startDate.toISOString().split("T")[0],endDate:this.state.endDate.toISOString().split("T")[0],selectedMode:this.state.selectedMode.type,selectedWardOrMonitor:this.state.selectedWardOrMonitor},a=y,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t.next=6,fetch(a,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * Summary for "+this.state.selectedWardOrMonitor+" received from db * * * * ",i),"success"===i.status?this.setState({wardOrMonitorSummary:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.get_pm25Ranks(),this.getWardPolygons(),this.getPollutantHistory()}},{key:"componentDidUpdate",value:function(t,e){this.state.selectedMode!==e.selectedMode&&(this.get_pm25Ranks(),this.getPollutantHistory()),this.state.selectedWardOrMonitor!==e.selectedWardOrMonitor&&""!==this.state.selectedWardOrMonitor&&(this.getWardOrMonitorHistory(),this.getWardOrMonitorSummary())}},{key:"render",value:function(){var t=this,e=Object(v.jsxs)(v.Fragment,{children:[this.state.alert.alertRaised?Object(v.jsxs)(q.a,{variant:"danger",onClose:function(){return t.handleAlerts(!1)},dismissible:!0,children:[Object(v.jsx)(q.a.Heading,{children:"Oh snap! You got an error!"}),Object(v.jsx)("p",{children:this.state.alert.alertMessage})]}):null,Object(v.jsx)(rt,{panCityView:this.state.panCityView,updateDates:this.updateDates,startDate:this.state.startDate,endDate:this.state.endDate,selectedWardOrMonitor:this.state.selectedWardOrMonitor,setSelectedMode:function(e){t.setState({selectedMode:e,selectedWardOrMonitor:""})},setSelectedWardOrMonitor:this.setSelectedWardOrMonitor,handlePanCityView:this.handlePanCityView,setStartDate:function(e){return t.setState({startDate:e})},setEndDate:function(e){return t.setState({endDate:e})}}),Object(v.jsx)(J,{startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode,panCityView:this.state.panCityView,selectedWardOrMonitor:this.state.selectedWardOrMonitor,rankedWards:this.state.rankedWards,pollutantHistory:this.state.pollutantHistory,wardOrMonitorHistory:this.state.wardOrMonitorHistory,wardOrMonitorSummary:this.state.wardOrMonitorSummary,wardPolygons:this.state.wardPolygons})]});return Object(v.jsxs)("div",{className:"parentdiv",children:[Object(v.jsx)(Y.a,{bg:"light",children:Object(v.jsxs)(G.a,{children:[Object(v.jsxs)(Y.a.Brand,{children:[Object(v.jsx)("img",{alt:"",src:L,className:"logo"}),Object(v.jsx)("span",{className:"websiteName",children:"Air Quality Dashboard"})]}),Object(v.jsxs)(Q.a,{className:"justify-content-end",children:[Object(v.jsx)(st,{}),Object(v.jsx)(lt,{})]})]})}),Object(v.jsx)("div",{className:"content",children:e})]})}}]),r}(p.a.Component);n.a.render(Object(v.jsx)(dt,{}),document.getElementById("root"))}},[[323,1,2]]]);
//# sourceMappingURL=main.9c29fe3f.chunk.js.map
{"version":3,"sources":["paths.js","visualizationPanel/SVGContainer.js","visualizationPanel/vizTools/ReactMapTool.js","visualizationPanel/vizTools/InfocardTool.js","visualizationPanel/vizTools/BarchartTool.js","visualizationPanel/vizTools/LinechartTool.js","visualizationPanel/vizTools/LinechartToolMonitorHistory.js","visualizationPanel/VizPanel.js","assets/ParisarLogo.png","controlPanel/ControlPanel.js","routes/Faq.js","routes/Contact.js","App.js","index.js"],"names":["API","RANKEDUNITS","concat","WARDORMONITORHISTORY","WARDPOLYGONS","WARDORMONITORSUMMARY","WARDSANDMONITORS","POLLUTANTHISTORY","SVGContainer","props","children","useState","containerWidth","setWidth","containerHeight","setHeight","containerRef","useRef","useEffect","current","offsetWidth","offsetHeight","clonedChild","React","cloneElement","width","height","className","styleName","ref","MonitorView","map","useMap","matchedFeature","wardsAndMonitors","find","feat","name","toUpperCase","selectedWardOrMonitor","parseFloat","lat","lon","centerX","centerY","setView","PanCityView","Legend","getColor","d","legend","L","control","position","onAdd","from","to","div","DomUtil","create","grades","gradeNames","labels","push","i","length","innerHTML","join","addTo","ReactMapTool","features","polygons","iudxMarkers","safarMarkers","mpcbMarkers","shapes","feat_coordinates","geometry","coordinates","j","reverse","forEach","index","Polygon","pathOptions","color","fillColor","properties","average_daily_pm25","fillOpacity","positions","Tooltip","sticky","name_mr","Number","toFixed","monitors","fillIudx","fillSafar","fillmpcb","filter","monitor","type","mon","CircleMarker","center","radius","MapContainer","scrollWheelZoom","panCityView","TileLayer","attribution","url","LayersControl","Overlay","checked","selectedMode","LayerGroup","InfocardTool","svgRef","svgWidth","size_per_division","svgHeight","summaryData","wardOrMonitorSummary","record","metric","num_missing_days","tag","pollution_rank","toString","num_units","count_exceeds_threshold","wrap","text","each","word","d3","this","words","split","line","lineNumber","y","attr","dy","tspan","append","pop","node","getComputedTextLength","console","log","svgEl","selectAll","remove","h","xScale","domain","range","x_scale","padding","xAxis","call","style","bandwidth","g","data","title","BarchartTool","margin","rankedWards","legendInfo","label","sort","a","b","best","y_scale","Average_pm25","yAxis","enter","xLeg_Scale","Object","keys","renderLegend","LinechartTool","dates","iudx_data","safar_data","ward_data","data_21","data_22","pollutantHistory","Date","Month_Year","Year","nice","monthly_average_pm25","x1","y1","x2","y2","datum","x","renderPanCityView","renderMonitorView","LinechartToolMonitorHistory","colorPalette","X","Month","yScale","uniqueYears","Set","yr","data_yr","month_number","divisions","VizPanel","state","paths","requestOptions","method","headers","body","fetch","response","json","poll_history","setState","loading","getPollutantHistory","units","undefined","wardPolygons","unit","ui","fontStyle","wardOrMonitorHistory","Component","dataSources","ControlPanel","unitSelectRef","pollutantSelectRef","setStartDate","date","setEndDate","setSelectedMode","e","ds","target","value","selectValue","clearValue","filteredMonitors","filterWardsAndMonitors","selectedDataSourceId","setSelectedWardOrMonitor","handlePanCityView","toFilterBy","startDate","setHours","getTimezoneOffset","getWardsAndMonitors","then","buttons","Button","fontSize","onClick","event","active","zIndex","ButtonGroup","size","placeholder","options","onChange","variant","wrapperClassName","dateFormat","selected","endDate","updateDates","Faq","fullscreen","setFullscreen","show","setShow","backgroundColor","borderColor","Modal","onHide","Header","closeButton","Title","Body","Contact","lgShow","setLgShow","library","add","faInstagram","faFacebook","faTwitter","display","id","flex","href","rel","icon","fixedWidth","App","get_pm25Ranks","getWardOrMonitorHistory","getWardOrMonitorSummary","handleAlerts","status","alert","alertMessage","alertRaised","message","payload","JSON","stringify","responseObject","today","date1","toISOString","categories","getWardPolygons","prevProps","prevState","content","Alert","onClose","dismissible","Heading","Navbar","bg","Container","Brand","alt","src","logo","Nav","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4a4bfe8d.chunk.js","sourcesContent":["export const API = \"https://server2.nikhilvj.co.in/airdata_api/API/\";\n// export const API = \"http://localhost:5600/API/\";\n\nexport const RANKEDUNITS = API.concat(\"rankedPm25Units\");\n\nexport const WARDORMONITORHISTORY = API.concat(\"getWardOrMonitorHistory\");\nexport const WARDPOLYGONS = API.concat(\"wardPolygons\");\nexport const WARDORMONITORSUMMARY = API.concat(\"wardOrMonitorSummary\");\n\nexport const WARDSANDMONITORS = API.concat(\"wardsAndMonitors\");\nexport const POLLUTANTHISTORY = API.concat(\"pollutantHistory\");\n\nexport const WARDCENTROIDS = API.concat(\"wardCentroids\");\n","import React, { useEffect, useRef, useState } from \"react\";\n\nexport default function SVGContainer(props) {\n  const { children } = props;\n\n  const [containerWidth, setWidth] = useState(0);\n  const [containerHeight, setHeight] = useState(0);\n\n  const containerRef = useRef(); //memory address containerRef.current\n\n  useEffect(() => {\n    if (containerRef.current) {\n      setWidth(containerRef.current.offsetWidth);\n      setHeight(containerRef.current.offsetHeight);\n    }\n  }, []); // if 2 changes call 1\n\n  const clonedChild = React.cloneElement(children, {\n    width: containerWidth,\n    height: containerHeight,\n  });\n  return (\n    <div className={`svgcontainer ${props.styleName}`} ref={containerRef}>\n      {clonedChild}\n    </div>\n  );\n}\n","import {\n  MapContainer,\n  TileLayer,\n  Polygon,\n  LayerGroup,\n  CircleMarker,\n  LayersControl,\n  useMap,\n  Tooltip,\n} from \"react-leaflet\";\nimport { useEffect } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nfunction MonitorView(props) {\n  const map = useMap();\n\n  let matchedFeature = props.wardsAndMonitors.find(\n    (feat) =>\n      feat.name.toUpperCase() === props.selectedWardOrMonitor.toUpperCase()\n  );\n\n  let [centerX, centerY] = [\n    parseFloat(matchedFeature.lat),\n    parseFloat(matchedFeature.lon),\n  ];\n\n  map.setView([centerX, centerY], 14);\n\n  return null;\n}\n\nfunction PanCityView(props) {\n  const map = useMap();\n  map.setView([18.502, 73.853], 12);\n  return null;\n}\n\nfunction Legend({}) {\n  const map = useMap();\n\n  const getColor = (d) => {\n    // return d > 35\n    //   ? \"#800026\"\n    //   : d > 30\n    //   ? \"#BD0026\"\n    //   : d > 25\n    //   ? \"#E31A1C\"\n    //   : d > 20\n    //   ? \"#FEB24C\"\n    //   : d > 15\n    //   ? \"#FED976\"\n    //   : d > 10\n    //   ? \"#57C7DB\"\n    //   : d > 5\n    //   ? \"#90D6E2\"\n    //   : \"#CAECF1\";\n    if (!d) return \"#ededed\";\n    return d > 250\n      ? \"#810100\"\n      : d > 120\n      ? \"#c41206\"\n      : d > 90\n      ? \"#f58f09\"\n      : d > 60\n      ? \"#CCA88A\"\n      : d > 30\n      ? \"#1E5E64\"\n      : \"#50C3CD\";\n  };\n\n  useEffect(() => {\n    if (map) {\n      const legend = L.control({ position: \"bottomleft\" });\n\n      legend.onAdd = () => {\n        const div = L.DomUtil.create(\"div\", \"info legend\");\n        const grades = [\"NA\", 0, 30, 60, 90, 120, 250];\n        const gradeNames = [\n          \"Not Available\",\n          \"Good\",\n          \"Satisfactory\",\n          \"Moderate\",\n          \"Poor\",\n          \"Very Poor\",\n          \"Severe\",\n        ];\n        let labels = [];\n        let from;\n        let to;\n\n        labels.push(\"<h5>PM 2.5</h5>\");\n        for (let i = 0; i < grades.length; i++) {\n          from = grades[i];\n          to = grades[i + 1];\n\n          if (grades[i] == \"NA\") {\n            labels.push(\n              '<i style=\"background:' +\n                getColor(null) +\n                '\"></i> ' +\n                from +\n                \" : &nbsp;&nbsp;\" +\n                gradeNames[i]\n            );\n          } else {\n            labels.push(\n              '<i style=\"background:' +\n                getColor(from + 1) +\n                '\"></i> ' +\n                from +\n                (to ? \"&ndash;\" + to : \"+\") +\n                \"&nbsp;&nbsp;\" +\n                gradeNames[i]\n            );\n          }\n        }\n        div.innerHTML = labels.join(\"<br>\");\n        return div;\n      };\n\n      legend.addTo(map);\n    }\n  }, [map]);\n  return null;\n}\n\nexport default function ReactMapTool(props) {\n  let features = [];\n  let polygons = [];\n  let iudxMarkers = [];\n  let safarMarkers = [];\n  let mpcbMarkers = [];\n\n  /* WARD POLYGONS */\n  if (props.shapes) {\n    features = props.shapes.features;\n\n    // GEO JSON data is returned with x and y flipped\n    for (let i = 0; i < features.length; i++) {\n      let feat_coordinates = features[i].geometry.coordinates[0];\n      for (let j = 0; j < feat_coordinates.length; j++) {\n        feat_coordinates[j].reverse();\n      }\n    }\n\n    function colorMapper(d) {\n      if (!d) return \"#ededed\";\n      return d > 250\n        ? \"#810100\"\n        : d > 120\n        ? \"#c41206\"\n        : d > 90\n        ? \"#f58f09\"\n        : d > 60\n        ? \"#CCA88A\"\n        : d > 30\n        ? \"#1E5E64\"\n        : \"#50C3CD\";\n    }\n\n    features.forEach((feat, index) => {\n      polygons.push(\n        <Polygon\n          key={index}\n          pathOptions={{\n            color: \"#777\",\n            fillColor: colorMapper(feat.properties.average_daily_pm25),\n            fillOpacity: 0.5,\n          }}\n          positions={feat.geometry.coordinates[0]}\n        >\n          <Tooltip sticky>\n            WARD <br />\n            {feat.properties.name} <br />\n            {feat.properties.name_mr} <br />\n            {\"PM2.5 :  \"}\n            {Number(parseFloat(feat.properties.average_daily_pm25)).toFixed(2)}\n          </Tooltip>\n        </Polygon>\n      );\n    });\n  }\n\n  /* IUDX MONITORS */\n  if (props.monitors) {\n    //1. filter iudx monitors\n    const fillIudx = { color: \"#3885e7\", fillColor: \"#3885e7\" };\n    const fillSafar = { color: \"#c738e7\", fillColor: \"#c738e7\" };\n    const fillmpcb = { color: \"#1eb708\", fillColor: \"#1eb708\" };\n\n    const iudxMonitors = props.monitors.filter(\n      (monitor) => monitor.type === \"iudx\"\n    );\n    iudxMonitors.forEach((mon, index) => {\n      iudxMarkers.push(\n        <CircleMarker\n          key={index}\n          center={[mon.lat, mon.lon]}\n          pathOptions={fillIudx}\n          radius={10}\n        >\n          <Tooltip sticky>\n            IUDX Monitor <br />\n            {mon.name} <br />\n            {\"PM 2.5 :  \"}\n            {Number(parseFloat(mon.average_daily_pm25)).toFixed(2)}\n          </Tooltip>\n        </CircleMarker>\n      );\n    });\n\n    //2. filter safar monitors\n    const safarMonitors = props.monitors.filter(\n      (monitor) => monitor.type === \"safar\"\n    );\n    safarMonitors.forEach((mon, index) => {\n      safarMarkers.push(\n        <CircleMarker\n          key={index}\n          center={[mon.lat, mon.lon]}\n          pathOptions={fillSafar}\n          radius={10}\n        >\n          <Tooltip sticky>\n            Safar Monitor <br /> {mon.name} <br />\n            {\"PM 2.5 :  \"}\n            {Number(parseFloat(mon.average_daily_pm25)).toFixed(2)}\n          </Tooltip>\n        </CircleMarker>\n      );\n    });\n\n    //3. filter MPCB monitors\n    const mpcbMonitors = props.monitors.filter(\n      (monitor) => monitor.type === \"mpcb\"\n    );\n    mpcbMonitors.forEach((mon, index) => {\n      mpcbMarkers.push(\n        <CircleMarker\n          key={index}\n          center={[mon.lat, mon.lon]}\n          pathOptions={fillmpcb}\n          radius={10}\n        >\n          <Tooltip sticky>\n            MPCB Monitor <br /> {mon.name} <br />\n            {\"PM 2.5 :  \"}\n            {Number(parseFloat(mon.average_daily_pm25)).toFixed(2)}\n          </Tooltip>\n        </CircleMarker>\n      );\n    });\n  }\n\n  return (\n    <MapContainer className=\"map_tool\" scrollWheelZoom={false}>\n      {props.panCityView ? (\n        <PanCityView features={features} />\n      ) : (\n        <MonitorView\n          wardsAndMonitors={props.monitors}\n          selectedWardOrMonitor={props.selectedWardOrMonitor}\n        />\n      )}\n      <TileLayer\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      {polygons}\n      <LayersControl position=\"bottomright\">\n        <LayersControl.Overlay\n          checked={\n            props.selectedMode.type === \"IUDX\" && !props.panCityView\n              ? true\n              : false\n          }\n          name=\"Smart City Monitors\"\n        >\n          <LayerGroup>{iudxMarkers}</LayerGroup>\n        </LayersControl.Overlay>\n        <LayersControl.Overlay\n          checked={\n            props.selectedMode.type === \"SAFAR\" && !props.panCityView\n              ? true\n              : false\n          }\n          name=\"Safar Monitors\"\n        >\n          <LayerGroup>{safarMarkers}</LayerGroup>\n        </LayersControl.Overlay>\n        <LayersControl.Overlay\n          checked={\n            props.selectedMode.type === \"MPCB\" && !props.panCityView\n              ? true\n              : false\n          }\n          name=\"MPCB Monitors\"\n        >\n          <LayerGroup>{mpcbMarkers}</LayerGroup>\n        </LayersControl.Overlay>\n      </LayersControl>\n      <Legend />\n    </MapContainer>\n  );\n}\n","import * as d3 from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\n\nexport default function InfocardTool(props) {\n  const { width, height } = props;\n  const svgRef = useRef(null);\n\n  const svgWidth = width;\n  const num_metrics = 4;\n  const size_per_division = svgWidth / num_metrics;\n  const svgHeight = height;\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 20,\n    left: 20,\n  };\n\n  // DATA to populate CHART\n  //TODO find a better way to handle this issue\n  let summaryData = [];\n  if (props.wardOrMonitorSummary.length > 0) {\n    let record = props.wardOrMonitorSummary[0];\n\n    summaryData = [\n      {\n        index: 0,\n        metric: record.num_missing_days,\n        tag: \"days of missing data\",\n      },\n      {\n        index: 1,\n        metric:\n          record.pollution_rank.toString() + \"/\" + record.num_units.toString(),\n        tag: \"highest pollution\",\n      },\n      {\n        index: 2,\n        metric: record.count_exceeds_threshold,\n        tag: \"number of days exceeding threshold of 30 PM2.5\",\n      },\n    ];\n  }\n\n  console.log(\"SUMMARY RECORD\", summaryData);\n\n  // const data = [\n  //   { index: 0, metric: 15, tag: \"days of missing data\" },\n  //   { index: 1, metric: 10, tag: \"highest pollution\" },\n  //   {\n  //     index: 2,\n  //     metric: 22,\n  //     tag: \"number of days exceeding threshold of 20 aqi\",\n  //   },\n  // ];\n\n  //REF: https://bl.ocks.org/guypursey/f47d8cd11a8ff24854305505dbbd8c07\n  function wrap(text, width) {\n    text.each(function () {\n      var text = d3.select(this),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        y = text.attr(\"y\"),\n        dy = parseFloat(text.attr(\"dy\")),\n        tspan = text\n          .text(null)\n          .append(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"y\", y)\n          .attr(\"dy\", dy + \"em\");\n      while ((word = words.pop())) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n        if (tspan.node().getComputedTextLength() > width) {\n          line.pop();\n          tspan.text(line.join(\" \"));\n          line = [word];\n          tspan = text\n            .append(\"tspan\")\n            .attr(\"x\", 0)\n            .attr(\"y\", y)\n            .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\n            .text(word);\n        }\n      }\n    });\n  }\n\n  useEffect(() => {\n    const svgEl = d3.select(svgRef.current);\n    svgEl.selectAll(\"*\").remove();\n    const h = svgHeight + 100;\n\n    //ViewBOX\n    svgEl.attr(\"viewBox\", \"0 0\" + \" \" + svgWidth + \" \" + h);\n\n    const xScale = d3\n      .scaleBand()\n      .domain(\n        summaryData.map(function (d) {\n          return d.index;\n        })\n      )\n      // .scaleLinear()\n      // .domain([0, num_metrics - 1]) // the number of divisions i.e. 3 here is one less than the data range //**\n      .range([size_per_division, width]);\n    // .range([0, svgWidth]);\n\n    if (svgHeight > 0) {\n      //REf : http://bl.ocks.org/ChrisJamesC/4474971\n\n      const x_scale = d3\n        .scaleBand()\n        .domain(\n          summaryData.map(function (d) {\n            return d.tag;\n          })\n        )\n        .range([0, svgWidth])\n        .padding(0.2);\n\n      let xAxis = d3.axisBottom(x_scale);\n\n      svgEl\n        .append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"transform\", \"translate(0,\" + svgHeight + \")\") // -- for flipping top to bottom\n        .call(xAxis)\n        .selectAll(\".tick text\")\n        .style(\"font-size\", \"18px\")\n        .call(wrap, x_scale.bandwidth());\n\n      /* Y axis */\n      // let yAxis = d3.axisLeft(y_scale);\n      // svgEl.append(\"g\").call(yAxis);\n\n      // // let elem = svgEl.selectAll(\"g myCircleText\").data(data);\n\n      let g = svgEl.append(\"g\");\n      g.selectAll(\"circle\")\n        .data(summaryData) // **\n        .join(\"circle\")\n        .attr(\"cx\", (d) => x_scale(d.tag) + xScale.bandwidth() / 2)\n        .attr(\"cy\", height / 2)\n        .attr(\"r\", (d) => 90)\n        .attr(\"fill\", \"#7df9ff\");\n\n      g.selectAll(\"text\")\n        .data(summaryData) // **\n        .join(\"text\")\n        .attr(\"dx\", (d) =>\n          d.tag === \"highest pollution\"\n            ? x_scale(d.tag) + x_scale.bandwidth() / 2 - 52\n            : x_scale(d.tag) + x_scale.bandwidth() / 2 - 40\n        )\n        .attr(\"dy\", height / 1.8)\n        .text((d) => d.metric)\n        .attr(\"fill\", \"#606161\")\n        .style(\"font-size\", (d) =>\n          d.tag === \"highest pollution\" ? \"40px\" : \"50px\"\n        );\n    }\n  });\n\n  return (\n    <div>\n      <div className=\"vizTitle\">{props.title}</div>\n      <svg width={width} height={height} ref={svgRef}></svg>\n    </div>\n  );\n}\n","import * as d3 from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\n\nexport default function BarchartTool(props) {\n  const { width, height } = props;\n  const svgRef = useRef(null);\n\n  const svgWidth = width;\n  const svgHeight = height;\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10,\n  };\n\n  let data = props.rankedWards;\n  let yAxisLabel = \"Average PM 2.5\";\n  // We use two colors here for Highest and lowest pollution\n  // will contain one object per legend entry\n  let legendInfo = [\n    { label: \"Lowest\", color: \"#50C3CD\" },\n    { label: \"Highest\", color: \"#BD762D\" },\n  ];\n  //SORTING BY RANK\n  data = data.sort((a, b) => a.best - b.best);\n\n  //REF: https://bl.ocks.org/guypursey/f47d8cd11a8ff24854305505dbbd8c07\n  function wrap(text, width) {\n    text.each(function () {\n      var text = d3.select(this),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        y = text.attr(\"y\"),\n        dy = parseFloat(text.attr(\"dy\")),\n        tspan = text\n          .text(null)\n          .append(\"tspan\")\n          .attr(\"x\", 0)\n          .attr(\"y\", y)\n          .attr(\"dy\", dy + \"em\");\n      while ((word = words.pop())) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n        if (tspan.node().getComputedTextLength() > width) {\n          line.pop();\n          tspan.text(line.join(\" \"));\n          line = [word];\n          tspan = text\n            .append(\"tspan\")\n            .attr(\"x\", 0)\n            .attr(\"y\", y)\n            .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\n            .text(word);\n        }\n      }\n    });\n  }\n\n  const renderLegend = (svgEl) => {\n    let divisions = legendInfo.length + 1; // 1 more than the legend entries\n    let size_per_division = svgWidth / divisions;\n\n    // X Scale for LEGEND\n    const xLeg_Scale = d3\n      .scaleLinear()\n      .domain([0, Object.keys(legendInfo).length - 1])\n      .range([size_per_division, width - size_per_division]);\n\n    svgEl\n      .append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + svgHeight + \")\")\n      .selectAll(\"text\")\n      .data(legendInfo)\n      .join(\"text\")\n      .attr(\"x\", (d, i) => xLeg_Scale(i))\n      .attr(\"y\", 2 * margin.top - svgHeight)\n      .attr(\"dy\", \"0.5em\")\n      .text((d) => d.label)\n      .attr(\"font-size\", \"18px\")\n      .attr(\"font-weight\", \"bold\")\n      .attr(\"fill\", (d) => d.color);\n  };\n\n  useEffect(() => {\n    const svgEl = d3.select(svgRef.current);\n    svgEl.selectAll(\"*\").remove();\n    const h = svgHeight + 20;\n\n    // X Scale for data\n    const x_scale = d3\n      .scaleBand()\n      .domain(\n        data.map(function (d) {\n          return d.name;\n        })\n      )\n      .range([0, svgWidth - margin.right])\n      .padding(0.2);\n\n    // Y Scale for data\n    const y_scale = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, (d) => Number(d.Average_pm25))])\n      .range([svgHeight, 4 * margin.top]);\n\n    //ViewBOX\n    svgEl.attr(\"viewBox\", \"-30 10\" + \" \" + svgWidth + \" \" + h);\n\n    let xAxis = d3.axisBottom(x_scale);\n\n    if (svgHeight > 0) {\n      /* X axis */\n      svgEl\n        .append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"transform\", \"translate(0,\" + svgHeight + \")\") // -- for flipping top to bottom\n        .call(xAxis)\n        .selectAll(\".tick text\")\n        .call(wrap, x_scale.bandwidth());\n\n      /* Y axis */\n      let yAxis = d3.axisLeft(y_scale);\n      svgEl.append(\"g\").call(yAxis);\n\n      /* Y Axis label */\n      svgEl\n        .append(\"text\")\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"x\", -250) // TODO get rid of hard coded values\n        .attr(\"y\", -4 * margin.top)\n        .attr(\"dy\", \".75em\")\n        .attr(\"fill\", \"#7c7c7c\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .text(yAxisLabel);\n\n      /* BARS */\n      svgEl\n        .selectAll(\"mybar\")\n        .data(data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", function (d) {\n          return x_scale(d.name);\n        })\n        .attr(\"y\", function (d) {\n          return y_scale(Number(d.Average_pm25));\n        })\n        .attr(\"width\", x_scale.bandwidth())\n        .attr(\"height\", function (d) {\n          return svgHeight - y_scale(Number(d.Average_pm25));\n        })\n        .attr(\"fill\", function (d) {\n          return d.best < 4 ? \"#50C3CD\" : \"#BD762D\";\n        });\n\n      renderLegend(svgEl);\n    }\n  });\n\n  return (\n    <div>\n      <div className=\"vizTitle\">{props.title}</div>\n      <svg width={width} height={height} ref={svgRef}></svg>\n    </div>\n  );\n}\n","// import { render } from \"@testing-library/react\";\nimport * as d3 from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\n\nexport default function LinechartTool(props) {\n  const { width, height } = props;\n  const svgRef = useRef(null);\n\n  const svgWidth = width;\n  const svgHeight = height;\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 100,\n  };\n\n  let dates = null;\n  let data = null;\n\n  //PAn city view\n  let iudx_data = null;\n  let safar_data = null;\n  let ward_data = null;\n  //ward or monitor view\n  let data_21 = null;\n  let data_22 = null;\n\n  let yAxisLabel = \"Monthly Average PM 2.5\";\n\n  const dataPrep = () => {\n    data = props.pollutantHistory;\n\n    if (props.panCityView) {\n      iudx_data = data.filter((d) => d.type === \"iudx\");\n      safar_data = data.filter((d) => d.type === \"safar\");\n      ward_data = data.filter((d) => d.type === \"ward\");\n      dates = data.map((d) => new Date(d.Month_Year));\n    } else {\n      // for monitor specific view\n      data_21 = data.filter((d) => d.Year === 2021);\n      data_22 = data.filter((d) => d.Year === 2022);\n      dates = data.map((d) => new Date(d.Month_Year));\n    }\n  };\n\n  const renderPanCityView = (svgEl, x_scale, y_scale) => {\n    //IUDX\n    svgEl\n      .append(\"path\")\n      .datum(iudx_data)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#D81B60\")\n      .attr(\"stroke-width\", 2.5)\n      .attr(\n        \"d\",\n        d3\n          .line()\n          .x(function (d) {\n            return x_scale(new Date(d.Month_Year));\n          })\n          .y(function (d) {\n            return y_scale(Number(d.monthly_average_pm25));\n          })\n      );\n\n    //SAFAR\n    svgEl\n      .append(\"path\")\n      .datum(safar_data)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#1E88E5\")\n      .attr(\"stroke-width\", 2.5)\n      .attr(\n        \"d\",\n        d3\n          .line()\n          .x(function (d) {\n            return x_scale(new Date(d.Month_Year));\n          })\n          .y(function (d) {\n            return y_scale(Number(d.monthly_average_pm25));\n          })\n      );\n\n    svgEl\n      .append(\"path\")\n      .datum(ward_data)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#004D40\")\n      .attr(\"stroke-width\", 2.5)\n      .attr(\n        \"d\",\n        d3\n          .line()\n          .x(function (d) {\n            return x_scale(new Date(d.Month_Year));\n          })\n          .y(function (d) {\n            return y_scale(Number(d.monthly_average_pm25));\n          })\n      );\n  };\n\n  const renderMonitorView = (svgEl, x_scale, y_scale) => {\n    //2021\n    svgEl\n      .append(\"path\")\n      .datum(data_21)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"red\")\n      .attr(\"stroke-width\", 2.5)\n      .attr(\n        \"d\",\n        d3\n          .line()\n          .x(function (d) {\n            return x_scale(new Date(d.Month_Year));\n          })\n          .y(function (d) {\n            return y_scale(Number(d.monthly_average_pm25));\n          })\n      );\n\n    //2022\n    svgEl\n      .append(\"path\")\n      .datum(data_22)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"green\")\n      .attr(\"stroke-width\", 2.5)\n      .attr(\n        \"d\",\n        d3\n          .line()\n          .x(function (d) {\n            return x_scale(new Date(d.Month_Year));\n          })\n          .y(function (d) {\n            return y_scale(Number(d.monthly_average_pm25));\n          })\n      );\n  };\n\n  useEffect(() => {\n    dataPrep();\n\n    const svgEl = d3.select(svgRef.current);\n    svgEl.selectAll(\"*\").remove();\n    const h = svgHeight + 20;\n\n    // X scale\n    const x_scale = d3\n      .scaleTime()\n      .domain(d3.extent(dates))\n      .nice()\n      .range([0, svgWidth - margin.right]);\n    // Y scale\n    const y_scale = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, (d) => Number(d.monthly_average_pm25))])\n      .range([svgHeight, 20]);\n\n    //ViewBOX\n    svgEl.attr(\"viewBox\", \"-30 10\" + \" \" + svgWidth + \" \" + h);\n\n    if (svgHeight > 0) {\n      /* X AXIS */\n      svgEl\n        .append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + svgHeight + \")\") // -- for flipping top to bottom\n        .call(d3.axisBottom(x_scale));\n\n      /* Y AXIS */\n      svgEl.append(\"g\").call(d3.axisLeft(y_scale));\n\n      /* Y Axis label */\n      svgEl\n        .append(\"text\")\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"x\", -250) // TODO get rid of hard coded values\n        .attr(\"y\", -4 * margin.top)\n        .attr(\"dy\", \".75em\")\n        .attr(\"fill\", \"#7c7c7c\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .text(yAxisLabel);\n\n      // Add the line\n      svgEl\n        .append(\"line\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#D81B60\")\n        .attr(\"stroke-width\", 2.5)\n        .attr({\n          x1: x_scale(d3.min(dates)),\n          y1: y_scale(35), //start of the line\n          x2: x_scale(d3.max(dates)),\n          y2: y_scale(35), //end of the line\n        });\n\n      if (props.panCityView) {\n        renderPanCityView(svgEl, x_scale, y_scale);\n      } else {\n        renderMonitorView(svgEl, x_scale, y_scale);\n      }\n    }\n  });\n\n  return (\n    <div>\n      <div className=\"vizTitle\">{props.title}</div>\n      <svg width={width} height={height} ref={svgRef}></svg>\n    </div>\n  );\n}\n","// import { render } from \"@testing-library/react\";\nimport * as d3 from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\n\nexport default function LinechartToolMonitorHistory(props) {\n  const { width, height } = props;\n  const svgRef = useRef(null);\n\n  const svgWidth = width;\n  const svgHeight = height;\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 100,\n  };\n\n  // https://personal.sron.nl/~pault/\n  // Safe for color blindness as well\n  const colorPalette = [\n    \"#4477AA\",\n    \"#EE6677\",\n    \"#228833\",\n    \"#CCBB44\",\n    \"#66CCEE\",\n    \"#AA3377\",\n    \"#BBBBBB\",\n  ];\n\n  let data = null;\n  let yAxisLabel = \"Monthly Average PM 2.5\";\n  let legendInfo = []; // will contain one object per legend entry\n\n  const dataPrep = () => {\n    data = props.pollutantHistory;\n  };\n\n  const renderMonitorView = (svgEl, xScale, yScale) => {\n    const uniqueYears = [...new Set(d3.map(data, (d, i) => d.Year))];\n    for (let yr = 0; yr < uniqueYears.length; yr++) {\n      let data_yr = data.filter((d) => d.Year === uniqueYears[yr]);\n\n      //SORTING\n      data_yr = data_yr.sort((a, b) => a.month_number - b.month_number);\n\n      svgEl\n        .append(\"path\")\n        .datum(data_yr)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", colorPalette[yr])\n        .attr(\"stroke-width\", 1)\n        .attr(\n          \"d\",\n          d3\n            .line()\n            .x((d) => xScale(d.Month) + xScale.bandwidth() / 2)\n            .y((d) => yScale(Number(d.monthly_average_pm25)))\n        );\n\n      svgEl\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(data_yr)\n        .enter()\n        .append(\"circle\")\n        .attr(\"fill\", colorPalette[yr])\n        .attr(\"stroke\", colorPalette[yr])\n        .attr(\"stroke-width\", 1)\n        .attr(\"r\", 3)\n        .attr(\"cx\", (d) => xScale(d.Month) + xScale.bandwidth() / 2)\n        .attr(\"cy\", (d) => yScale(Number(d.monthly_average_pm25)));\n\n      // Populate info for legend\n      legendInfo.push({\n        label: uniqueYears[yr].toString(),\n        color: colorPalette[yr],\n      });\n    }\n  };\n\n  const renderLegend = (svgEl) => {\n    // X Scale for LEGEND\n    let divisions = legendInfo.length + 1; // 1 more than the legend entries\n    let size_per_division = svgWidth / divisions;\n    const xLeg_Scale = d3\n      .scaleLinear()\n      .domain([0, Object.keys(legendInfo).length - 1])\n      .range([size_per_division, svgWidth - size_per_division]);\n\n    //** LEGEND INFO  */\n    svgEl\n      .append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + svgHeight + \")\")\n      .selectAll(\"text\")\n      .data(legendInfo)\n      .join(\"text\")\n      .attr(\"x\", (d, i) => xLeg_Scale(i))\n      .attr(\"y\", 2 * margin.top - svgHeight)\n      .attr(\"dy\", \"0.5em\")\n      .text((d) => d.label)\n      .attr(\"font-size\", \"18px\")\n      .attr(\"font-weight\", \"bold\")\n      .attr(\"fill\", (d) => d.color);\n  };\n\n  useEffect(() => {\n    dataPrep();\n\n    const svgEl = d3.select(svgRef.current);\n    svgEl.selectAll(\"*\").remove();\n    const h = svgHeight + 20;\n\n    const X = d3.map(data, (d, i) => d.Month);\n\n    // X scale\n    const xScale = d3.scaleBand(new d3.InternSet(X), [\n      0,\n      svgWidth - margin.right,\n    ]);\n\n    // Y scale\n    const yScale = d3\n      .scaleLinear()\n      .domain([\n        d3.min(data, (d) => Number(d.monthly_average_pm25)) - 2,\n        d3.max(data, (d) => Number(d.monthly_average_pm25)),\n      ])\n      .range([svgHeight, 4 * margin.top]);\n\n    //ViewBOX\n    svgEl.attr(\"viewBox\", \"-30 -2\" + \" \" + svgWidth + \" \" + h);\n\n    if (svgHeight > 0) {\n      /* X AXIS */\n      svgEl\n        .append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + svgHeight + \")\")\n        .call(d3.axisBottom(xScale));\n      /* Y AXIS */\n      svgEl.append(\"g\").call(d3.axisLeft(yScale));\n\n      /* Y Axis label */\n      svgEl\n        .append(\"text\")\n        .attr(\"class\", \"y label\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"x\", -250) // TODO get rid of hard coded values\n        .attr(\"y\", -4 * margin.top)\n        .attr(\"dy\", \".75em\")\n        .attr(\"fill\", \"#7c7c7c\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .text(yAxisLabel);\n\n      renderMonitorView(svgEl, xScale, yScale);\n      renderLegend(svgEl);\n    }\n  });\n\n  return (\n    <div>\n      <div className=\"vizTitle\">{props.title}</div>\n      <svg width={width} height={height} ref={svgRef}></svg>\n    </div>\n  );\n}\n","import React from \"react\";\nimport * as paths from \"./../paths\";\n\nimport SVGContainer from \"./SVGContainer.js\";\nimport ReactMapTool from \"./vizTools/ReactMapTool.js\";\nimport InfocardTool from \"./vizTools/InfocardTool.js\";\nimport BarchartTool from \"./vizTools/BarchartTool.js\";\nimport LinechartTool from \"./vizTools/LinechartTool.js\";\nimport LinechartToolMonitorHistory from \"./vizTools/LinechartToolMonitorHistory.js\";\n\nexport default class VizPanel extends React.Component {\n  // const [showSVG, setShowSVG] = useState(false); // look up destructuring\n  // function clickHandler() {\n  //     setShowSVG(true);\n  // }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      pollutantHistory: [],\n    };\n  }\n\n  async getPollutantHistory() {\n    // retrieving data\n    const url = paths.POLLUTANTHISTORY;\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: null,\n    };\n    const response = await fetch(url, requestOptions);\n\n    //processing retrieved data\n    const poll_history = await response.json();\n    console.log(\" * * * * POLLUTANT HISTORY * * * * \", poll_history);\n\n    this.setState({\n      pollutantHistory: poll_history.data,\n      loading: false,\n    });\n  }\n\n  componentDidMount() {\n    this.getPollutantHistory();\n  }\n\n  render() {\n    let units = [];\n    let type = \"WARD\";\n\n    if (this.props.wardPolygons.data !== undefined) {\n      units = this.props.wardPolygons.data.filter(\n        (unit) =>\n          unit.type.toUpperCase() === this.props.selectedMode.type.toUpperCase()\n      );\n      type = this.props.selectedMode.type === \"WARD\" ? \"ward\" : \"monitor\";\n    }\n\n    const ui = (\n      <>\n        <div className=\"text_n_map\">\n          <div className=\"textTool display-linebreak\">\n            {\"This dashboard reports PM 2.5 from various data sources available in Pune. \" +\n              \"The \" +\n              this.props.selectedMode.name +\n              \" data is collected by \" +\n              units.length +\n              \" \" +\n              type +\n              \"s all across Pune.\\n\"}\n            <span style={{ fontStyle: \"italic\" }}>\n              {\" To know more, select your \" +\n                type +\n                \" from the dropdown above.\\n\"}\n            </span>\n            <br />\n            {\n              \"PM 2.5 (particulate matter), an air pollutant, is very harmful to our health. It not only enters our lungs, but can also enter our bloodstream and affect many of our vital organs like the heart, brain and kidneys.\"\n            }\n          </div>\n          <div className=\"mapBaap\">\n            <ReactMapTool\n              panCityView={this.props.panCityView}\n              shapes={this.props.wardPolygons.shapes}\n              monitors={this.props.wardPolygons.data}\n              selectedMode={this.props.selectedMode}\n              selectedWardOrMonitor={this.props.selectedWardOrMonitor}\n            ></ReactMapTool>\n          </div>\n        </div>\n        <div className=\"bar_n_line\">\n          {this.props.panCityView ? (\n            <SVGContainer>\n              <BarchartTool\n                title={\n                  \"Top 3 \" +\n                  (this.props.selectedMode.type === \"WARD\"\n                    ? \"wards\"\n                    : \"monitors\") +\n                  \" showing the lowest to highest levels of pm2.5\"\n                }\n                rankedWards={this.props.rankedWards}\n              ></BarchartTool>\n            </SVGContainer>\n          ) : (\n            <SVGContainer>\n              <InfocardTool\n                title={this.props.selectedWardOrMonitor}\n                selectedMode={this.props.selectedMode}\n                selectedWardOrMonitor={this.props.selectedWardOrMonitor}\n                wardOrMonitorSummary={this.props.wardOrMonitorSummary}\n              />\n            </SVGContainer>\n          )}\n\n          {this.props.panCityView ? (\n            <SVGContainer>\n              <LinechartTool\n                title={\"PM2.5 for PAN CITY VIEW\"}\n                pollutantHistory={this.state.pollutantHistory}\n                panCityView={this.props.panCityView}\n              ></LinechartTool>\n            </SVGContainer>\n          ) : (\n            <SVGContainer>\n              <LinechartToolMonitorHistory\n                title={\n                  \"PM2.5 history for \" +\n                  this.props.selectedMode.type +\n                  \" \" +\n                  this.props.selectedWardOrMonitor\n                }\n                pollutantHistory={this.props.wardOrMonitorHistory}\n                panCityView={this.props.panCityView}\n              ></LinechartToolMonitorHistory>\n            </SVGContainer>\n          )}\n        </div>\n      </>\n    );\n\n    return <div className=\"vizpanel\">{ui}</div>;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/ParisarLogo.a617d95d.png\";","import React from \"react\";\nimport * as paths from \"./../paths\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\n\nimport Select from \"react-select\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nconst dataSources = [\n  { name: \"Satellite Based\", type: \"WARD\" },\n  { name: \"Smart City\", type: \"IUDX\" },\n  { name: \"SAFAR\", type: \"SAFAR\" },\n  { name: \"MPCB\", type: \"MPCB\" },\n];\n\nexport default class ControlPanel extends React.Component {\n  unitSelectRef = null;\n  pollutantSelectRef = null;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedDataSourceId: 0,\n      filteredMonitors: [],\n      wardsAndMonitors: [],\n      // wardsAndMonitors: [\n      //   { label: \"WARD1\", value: \"WARD1\", type: \"WARD\" },\n      //   { label: \"WARD2\", value: \"WARD2\", type: \"WARD\" },\n      //   { label: \"WARD3\", value: \"WARD3\", type: \"WARD\" },\n      //   { label: \"SAFAR1\", value: \"SAFAR1\", type: \"SAFAR\" },\n      //   { label: \"IUDX1\", value: \"IUDX1\", type: \"IUDX\" },\n      //   { label: \"MPCB1\", value: \"MPCB1\", type: \"MPCB\" },\n      // ],\n    };\n  }\n\n  /* Utility*/\n  async getWardsAndMonitors() {\n    // retrieving data\n    const url = paths.WARDSANDMONITORS;\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: null,\n    };\n    const response = await fetch(url, requestOptions);\n\n    //processing retrieved data\n    const wardsAndMonitors = await response.json();\n    console.log(\" * * * * WARDS AND MONITORS * * * * \", wardsAndMonitors);\n\n    this.setState({\n      wardsAndMonitors: wardsAndMonitors.data,\n    });\n\n    return wardsAndMonitors;\n  }\n\n  filterWardsAndMonitors(toFilterBy) {\n    return this.state.wardsAndMonitors.filter(\n      (monitor) => monitor.type === toFilterBy.type\n    );\n  }\n\n  /* * Setters */\n\n  setStartDate = (date) => {\n    this.props.setStartDate(date);\n  };\n\n  setEndDate = (date) => {\n    this.props.setEndDate(date);\n  };\n\n  setSelectedMode = (e, i) => {\n    let selectedMode = dataSources.find((ds) => ds.name === e.target.value);\n    this.props.setSelectedMode(selectedMode);\n\n    /*\n    https://stackoverflow.com/questions/50412843/how-to-programmatically-clear-reset-react-select\n    Only if a selection in the monitor dropdown has been made, clear it when a new datasource is selected\n    because the options will repopulate \n    */\n    if (this.unitSelectRef.state.selectValue.length > 0)\n      this.unitSelectRef.clearValue();\n\n    let filteredMonitors = this.filterWardsAndMonitors(selectedMode);\n\n    this.setState({\n      selectedDataSourceId: i,\n      filteredMonitors: filteredMonitors,\n    });\n  };\n\n  setSelectedWardOrMonitor = (e) => {\n    this.props.setSelectedWardOrMonitor(e);\n    this.props.handlePanCityView();\n  };\n\n  /* * * Lifecycle hooks */\n  componentDidMount() {\n    //This handles the data selection bug from DatePicker react widget\n    if (this.state.startDate) {\n      this.state.startDate.setHours(\n        (+1 * this.state.startDate.getTimezoneOffset()) / 60\n      );\n    }\n    // const dataSources = [\"WARD\", \"IUDX\", \"SAFAR\", \"MPCB\"];\n\n    //TESTING\n    // let wnm = this.state.wardsAndMonitors;\n    // let filteredMonitors = this.filterWardsAndMonitors(\n    //   dataSources[this.state.selectedDataSourceId]\n    // );\n    // this.setState({\n    //   filteredMonitors: filteredMonitors,\n    // });\n\n    //FETCHING FROM SERVER\n    let wnm = this.getWardsAndMonitors();\n    wnm.then((value) => {\n      let filteredMonitors = this.filterWardsAndMonitors(\n        dataSources[this.state.selectedDataSourceId]\n      );\n      this.setState({\n        filteredMonitors: filteredMonitors,\n      });\n    });\n  }\n\n  render() {\n    const buttons = (\n      <>\n        {dataSources.map((ds, i) => (\n          <Button\n            key={i}\n            style={{ fontSize: \"12px\" }}\n            value={ds.name}\n            onClick={(event) => this.setSelectedMode(event, i)}\n            active={i === this.state.selectedDataSourceId ? true : false}\n          >\n            {ds.name}\n          </Button>\n        ))}\n      </>\n    );\n\n    return (\n      <div>\n        <div className=\"controlpanel\">\n          <div className=\"controlPanelSection1\">\n            {this.props.panCityView ? (\n              <div className=\"panCityControl\" style={{ zIndex: 999 }}>\n                <ButtonGroup size=\"sm\" className=\"cp-section1items\">\n                  {buttons}\n                </ButtonGroup>\n                <Select\n                  ref={(ref) => {\n                    this.unitSelectRef = ref;\n                  }}\n                  className=\"cp-section1items datasource-select\"\n                  placeholder=\"Select a ward or monitor\"\n                  options={this.state.filteredMonitors}\n                  onChange={this.setSelectedWardOrMonitor}\n                />\n              </div>\n            ) : (\n              <div className=\"panCityControl\">\n                <Button variant=\"link\" onClick={this.props.handlePanCityView}>\n                  PUNE\n                </Button>\n                <div>\n                  {/* {\"Selected \"}\n                  {this.state.selectedDataSourceId === 0\n                    ? \"ward : \"\n                    : dataSources[this.state.selectedDataSourceId] +\n                      \" monitor : \"} */}\n                  {\"/ \" +\n                    dataSources[this.state.selectedDataSourceId].type +\n                    \"  : \" +\n                    this.props.selectedWardOrMonitor}\n                </div>\n              </div>\n            )}\n\n            <Select\n              ref={(ref) => {\n                this.pollutantSelectRef = ref;\n              }}\n              className=\"cp-section1items\"\n              placeholder=\"Select a pollutant\"\n            />\n          </div>\n\n          <div className=\"controlPanelSection2\">\n            <DatePicker\n              wrapperClassName=\"cp-section2items\"\n              dateFormat=\"yyyy/MM/dd\"\n              selected={this.props.startDate}\n              onChange={(date) => this.setStartDate(date)}\n            />\n            <label className=\"cp-section2items\"> - </label>\n            <DatePicker\n              wrapperClassName=\"cp-section2items\"\n              dateFormat=\"yyyy/MM/dd\"\n              selected={this.props.endDate}\n              onChange={(date) => this.setEndDate(date)}\n            />\n            <Button\n              variant=\"dark\"\n              size=\"sm\"\n              className=\"cp-section2items\"\n              onClick={this.props.updateDates}\n            >\n              Update\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { useState } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nexport const Faq = (props) => {\n  const [fullscreen, setFullscreen] = useState(true);\n  const [show, setShow] = useState(false);\n\n  function handleShow(breakpoint) {\n    setFullscreen(breakpoint);\n    setShow(true);\n  }\n\n  return (\n    <div>\n      <Button\n        style={{\n          color: \"#606161\",\n          backgroundColor: \"#F8F9F9\",\n          borderColor: \"#F8F9F9\",\n        }}\n        onClick={() => handleShow(true)}\n      >\n        FAQs\n      </Button>\n      <Modal show={show} fullscreen={fullscreen} onHide={() => setShow(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>Frequently Asked Questions</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <h4>What is Air Quality Index (AQI)? </h4>\n          <p>\n            The Air Quality Index is a way of measuring air pollution, by taking\n            into account the presence of different pollutants in air like\n            particulate matter (PM 2.5, PM 10), Ozone, CO, SOx and NOx. In\n            India, we follow a 500 point scale to show the degree of air\n            pollution and take into account 5 major pollutants namely PM2.5,\n            PM10, CO, Ozone and NO2.\n          </p>\n          <h4>Is Pune's air polluted?</h4>{\" \"}\n          <p>\n            Pune is one of the 132 nonattainment cities declared under the\n            National Clean Air Programme. This means that the air quality in\n            Pune does not conform to the National Ambient Air Quality Standards\n            prescribed by the Central Board of Pollution Control. The National\n            Clean Air Programme was launched in 2019 by the Ministry of\n            Environment, Forest and Climate Change, which made it mandatory for\n            the nonattainment cities to prepare air action plans. The objective\n            of these plans was to reduce the PM 2.5 pollution by 30-40% till\n            2024 (with 2017 as the base). Accordingly, Pune has prepared an air\n            action plan, and is currently being implemented.{\" \"}\n          </p>\n          <h4>Where is all this data coming from? </h4>\n          <p>\n            The dashboard displays air quality data from four sources, as\n            follows\n            <ul>\n              <li>\n                Satellite based data - This data is being plugged in from the\n                Blue Sky Analytics, capturing PM 2.5 data based on a grid of 1km\n                x 1km. This data is being used to create the base map of Pune\n                constituting the 41 administrative wards.\n              </li>\n              <li>\n                Pune Smart City Monitors - The data from 50 low cost monitors,\n                spread all over Pune, is being displayed. While the dashboard\n                only shows PM 2.5 readings, these monitors capture a range of\n                other pollutants like PM 10, sulphur dioxide , nitrogen dioxide,\n                carbon monoxide and ozone.{\" \"}\n              </li>\n              <li>\n                SAFAR - Short for System of Air Quality and Weather Forecasting\n                And Research, this application provides data from seven monitors\n                installed by the Institute of Tropical Meteorology in Pune. This\n                data is used by the Pune Municipal Corporation to prepare its\n                Environmental Status Report every year. Apart from PM 2.5, which\n                is being displayed on this dashboard, these monitors capture\n                pollutants like PM 10 and Ozone.\n              </li>{\" \"}\n              <li>\n                MPCB - Short for Maharashtra Pollution Control Board, this data\n                is captured by the five monitors set up by the board in Pune.\n                Apart from PM2.5, these monitors capture data on other\n                pollutants, namely SOx, NOx and PM 10.\n              </li>\n            </ul>\n          </p>\n          <h4>Why focus on PM 2.5?</h4>{\" \"}\n          <p>\n            While air pollution affects our health, particulate matter pollution\n            is most hazardous. These minute particles not only enter and damage\n            our lungs, but can also enter the bloodstream, thereby affecting\n            other vital organs like the heart, kidney and even the brain.\n            Increased exposure to high PM 2.5 levels can cause asthma, chronic\n            obstructive pulmonary disorder, bronchitis, heart disease,\n            alzheimers, kidney disorders and so on. Where does PM 2.5 come from?\n            Main sources of PM 2.5 in urban areas are vehicular emissions, coal/\n            natural gas fired power plants, and burning.{\" \"}\n          </p>\n          <h4>What is being done to improve Pune's air quality? </h4>\n          <p>\n            Pune has prepared the Air Action Plan as mandated by the NCAP. The\n            plan has different actions related to transport, waste management,\n            greening etc to improve air quality.\n          </p>\n          <h4>What can you do with this dashboard?</h4>\n          <p>\n            This dashboard is a tool to understand air pollution in Pune in a\n            simple manner. The variety of data sources allows you to find out\n            ward specific pollution, something which can be taken up with your\n            local corporator or PMC in order to improve air quality. The\n            dashboard can also be used as a learning tool by different schools\n            to introduce and understand the issue of air pollution.\n          </p>\n        </Modal.Body>\n      </Modal>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\n\n// Font Awesome\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faInstagram,\n  faFacebook,\n  faTwitter,\n} from \"@fortawesome/free-brands-svg-icons\";\n\nexport const Contact = () => {\n  const [lgShow, setLgShow] = useState(false);\n  library.add(faInstagram, faFacebook, faTwitter);\n\n  return (\n    <>\n      <Button\n        style={{\n          color: \"#606161\",\n          backgroundColor: \"#F8F9F9\",\n          borderColor: \"#F8F9F9\",\n        }}\n        onClick={() => setLgShow(true)}\n      >\n        Contact Us\n      </Button>\n      <Modal\n        size=\"lg\"\n        show={lgShow}\n        onHide={() => setLgShow(false)}\n        aria-labelledby=\"example-modal-sizes-title-lg\"\n      >\n        <Modal.Header closeButton style={{ display: \"flex\" }}>\n          <Modal.Title id=\"example-modal-sizes-title-lg\" style={{ flex: 1 }}>\n            Reach out to us\n          </Modal.Title>\n          <span>\n            <a\n              href=\"https://www.instagram.com/parisar_org/\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              <FontAwesomeIcon\n                size={\"xl\"}\n                icon=\"fa-brands fa-instagram\"\n                fixedWidth\n              />\n            </a>\n            <a\n              href=\"https://twitter.com/parisarpune\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              <FontAwesomeIcon\n                size={\"xl\"}\n                icon=\"fa-brands fa-twitter\"\n                fixedWidth\n              />\n            </a>\n            <a\n              href=\"https://www.facebook.com/ParisarUrbanTransport/\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              <FontAwesomeIcon\n                size={\"xl\"}\n                icon=\"fa-brands fa-facebook\"\n                fixedWidth\n                className=\"facebook\"\n              />\n            </a>\n          </span>\n        </Modal.Header>\n        <Modal.Body>\n          Please send us your questions{\" \"}\n          <a\n            href=\"https://parisar.org/contact-us\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            here\n          </a>\n          .\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n};\n","/*\nControls the side control panel and the viz Panel\n*/\nimport React from \"react\";\n\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as paths from \"./paths\";\n\nimport VizPanel from \"./visualizationPanel/VizPanel.js\";\nimport logo from \"./assets/ParisarLogo.png\";\n\nimport { Nav, Navbar, Container, Alert } from \"react-bootstrap\";\n\nimport ControlPanel from \"./controlPanel/ControlPanel\";\nimport { Faq } from \"./routes/Faq\";\nimport { Contact } from \"./routes/Contact\";\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedMode: { name: \"Satellite Based\", type: \"WARD\" },\n      selectedWardOrMonitor: \"\",\n      panCityView: true,\n      wardOrMonitorHistory: [],\n      wardOrMonitorSummary: [],\n      wardPolygons: [],\n      rankedWards: [],\n      startDate: new Date(\"2021-04-24\"),\n      endDate: new Date(),\n      alert: {\n        alertRaised: false,\n        alertMessage: \"\",\n      },\n    };\n  }\n\n  updateDates = (e) => {\n    // Fetching NEW data according to UPDATED DATES\n    this.get_pm25Ranks();\n    if (this.state.selectedWardOrMonitor !== \"\") {\n      this.getWardOrMonitorHistory();\n      this.getWardOrMonitorSummary();\n    }\n  };\n\n  // Get top 3 and bottom 3 ranks for pollutants\n  async get_pm25Ranks() {\n    let message = \"\";\n\n    const payload = {\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      selectedMode: this.state.selectedMode.type,\n    };\n\n    // retrieving data\n    const url = paths.RANKEDUNITS;\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n    };\n    const response = await fetch(url, requestOptions);\n\n    //processing retrieved data\n    const responseObject = await response.json();\n    console.log(\n      \" * * * * Ranked \" +\n        this.state.selectedMode.name +\n        \" received from db * * * * \",\n      responseObject\n    );\n\n    if (responseObject.status === \"success\") {\n      this.setState({\n        rankedWards: responseObject.data,\n      });\n    } else {\n      if (responseObject.message === \"No data found in DB\") {\n        message =\n          \"Sorry! We do not have the data for the selected date ranges. Please try changing them.\";\n      }\n\n      this.setState({\n        alert: {\n          alertMessage: message,\n          alertRaised: true,\n        },\n      });\n    }\n  }\n\n  async getWardOrMonitorHistory() {\n    let message = \"\";\n\n    const payload = {\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      selectedMode: this.state.selectedMode.type,\n      selectedWardOrMonitor: this.state.selectedWardOrMonitor,\n    };\n\n    // retrieving data\n    const url = paths.WARDORMONITORHISTORY;\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n    };\n    const response = await fetch(url, requestOptions);\n    //processing retrieved data\n    const responseObject = await response.json();\n    console.log(\n      \" * * * * History for \" +\n        payload.selectedMode +\n        payload.selectedWardOrMonitor +\n        \" received from db * * * * \",\n      responseObject\n    );\n\n    if (responseObject.status === \"success\") {\n      this.setState({\n        wardOrMonitorHistory: responseObject.data,\n      });\n    } else {\n      if (responseObject.message === \"No data found in DB\") {\n        message =\n          \"Sorry! We do not have the data for the selected monitor or ward or the date ranges. Please try changing them.\";\n      }\n\n      this.setState({\n        alert: {\n          alertMessage: message,\n          alertRaised: true,\n        },\n      });\n    }\n  }\n\n  async getWardPolygons() {\n    let wardPolygons = this.state.wardPolygons;\n    if (this.state.wardPolygons.length !== 101) {\n      // TODO get this date from UI components\n      let today = new Date(\"2021-06-06\");\n      const payload = {\n        date1: today.toISOString().split(\"T\")[0],\n        categories: [\"iudx\", \"safar\", \"ward\", \"mpcb\"],\n      };\n\n      // retrieving data\n      const url = paths.WARDPOLYGONS;\n      const requestOptions = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      };\n      const response = await fetch(url, requestOptions);\n\n      //processing retrieved data\n      wardPolygons = await response.json();\n      console.log(\n        \" * * * * POLYGONS with pollutants received from db * * * * \",\n        wardPolygons\n      );\n    }\n\n    this.setState({\n      wardPolygons: wardPolygons,\n    });\n  }\n\n  async getWardOrMonitorSummary() {\n    let message = \"\";\n\n    const payload = {\n      startDate: this.state.startDate.toISOString().split(\"T\")[0], // getting a MYSQL date truncate issue if date not formatted this way\n      endDate: this.state.endDate.toISOString().split(\"T\")[0],\n      selectedMode: this.state.selectedMode.type,\n      selectedWardOrMonitor: this.state.selectedWardOrMonitor,\n    };\n\n    // retrieving data\n    const url = paths.WARDORMONITORSUMMARY;\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n    };\n    const response = await fetch(url, requestOptions);\n\n    //processing retrieved data\n    const responseObject = await response.json();\n    console.log(\n      \" * * * * Summary for \" +\n        this.state.selectedWardOrMonitor +\n        \" received from db * * * * \",\n      responseObject\n    );\n\n    if (responseObject.status === \"success\") {\n      this.setState({\n        wardOrMonitorSummary: responseObject.data, // only 1 record is always returned\n      });\n    } else {\n      if (responseObject.message === \"No data found in DB\") {\n        message =\n          \"Sorry! We do not have the data for the selected date ranges. Please try changing them.\";\n      }\n\n      this.setState({\n        alert: {\n          alertMessage: message,\n          alertRaised: true,\n        },\n      });\n    }\n  }\n\n  /*\n   * FETCHING DATA FROM API\n   * This is where all the api calls are made to get data from the server\n   */\n  componentDidMount() {\n    // HORIZONTAL BAR CHART TOOL\n    this.get_pm25Ranks();\n    // MAPTOOL\n    this.getWardPolygons();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // TODO get this verified\n    // Fetching NEW data according to UPDATED SELECTED MODE\n    if (this.state.selectedMode !== prevState.selectedMode) {\n      this.get_pm25Ranks();\n    }\n    if (\n      this.state.selectedWardOrMonitor !== prevState.selectedWardOrMonitor &&\n      this.state.selectedWardOrMonitor !== \"\"\n    ) {\n      this.getWardOrMonitorHistory();\n      this.getWardOrMonitorSummary();\n    }\n  }\n\n  handleAlerts = (status) => {\n    this.setState({\n      alert: {\n        alertMessage: \"\",\n        alertRaised: status,\n      },\n    });\n  };\n\n  handlePanCityView = () => {\n    this.setState({\n      panCityView: !this.state.panCityView,\n    });\n  };\n\n  setSelectedWardOrMonitor = (e) => {\n    this.setState({\n      selectedWardOrMonitor: e.value,\n    });\n  };\n  render() {\n    const content = (\n      <>\n        {this.state.alert.alertRaised ? (\n          <Alert\n            variant=\"danger\"\n            onClose={() => this.handleAlerts(false)}\n            dismissible\n          >\n            <Alert.Heading>Oh snap! You got an error!</Alert.Heading>\n            <p>{this.state.alert.alertMessage}</p>\n          </Alert>\n        ) : null}\n        <ControlPanel\n          panCityView={this.state.panCityView}\n          updateDates={this.updateDates}\n          startDate={this.state.startDate}\n          endDate={this.state.endDate}\n          selectedWardOrMonitor={this.state.selectedWardOrMonitor}\n          setSelectedMode={(selectedMode) => {\n            this.setState({\n              selectedMode: selectedMode,\n              selectedWardOrMonitor: \"\",\n            });\n          }}\n          setSelectedWardOrMonitor={this.setSelectedWardOrMonitor}\n          handlePanCityView={this.handlePanCityView}\n          // getWardOrMonitorHistory={this.getWardOrMonitorHistory.bind(this)}\n          setStartDate={(date) => this.setState({ startDate: date })}\n          setEndDate={(date) => this.setState({ endDate: date })}\n        />\n        {false ? (\n          \"Retrieving data . . .\"\n        ) : (\n          <VizPanel\n            startDate={this.state.startDate}\n            endDate={this.state.endDate}\n            selectedMode={this.state.selectedMode}\n            panCityView={this.state.panCityView}\n            selectedWardOrMonitor={this.state.selectedWardOrMonitor}\n            rankedWards={this.state.rankedWards}\n            wardOrMonitorHistory={this.state.wardOrMonitorHistory}\n            wardOrMonitorSummary={this.state.wardOrMonitorSummary}\n            wardPolygons={this.state.wardPolygons}\n          />\n        )}\n      </>\n    );\n\n    return (\n      <div className=\"parentdiv\">\n        <Navbar bg=\"light\">\n          <Container>\n            <Navbar.Brand>\n              <img alt=\"\" src={logo} className=\"logo\" />\n              <span className=\"websiteName\">{\"Air Quality Dashboard\"}</span>\n            </Navbar.Brand>\n            <Nav className=\"justify-content-end\">\n              <Faq />\n              <Contact />\n            </Nav>\n          </Container>\n        </Navbar>\n        <div className=\"content\">{content}</div>\n      </div>\n    );\n  }\n}\n","import ReactDOM from \"react-dom\";\n\nimport App from \"./App.js\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}
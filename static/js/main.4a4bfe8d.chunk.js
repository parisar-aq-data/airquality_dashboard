(this.webpackJsonpairquality_dashboard=this.webpackJsonpairquality_dashboard||[]).push([[0],{251:function(t,e,a){},319:function(t,e,a){"use strict";a.r(e);var r=a(16),n=a.n(r),s=a(15),o=a.n(s),i=a(37),c=a(23),l=a(24),d=a(27),u=a(28),h=a(0),p=a.n(h),f=(a(251),a(133),"https://server2.nikhilvj.co.in/airdata_api/API/"),m=f.concat("rankedPm25Units"),b=f.concat("getWardOrMonitorHistory"),j=f.concat("wardPolygons"),y=f.concat("wardOrMonitorSummary"),O=f.concat("wardsAndMonitors"),x=f.concat("pollutantHistory"),g=(f.concat("wardCentroids"),a(9)),v=a(1);function M(t){var e=t.children,a=Object(h.useState)(0),r=Object(g.a)(a,2),n=r[0],s=r[1],o=Object(h.useState)(0),i=Object(g.a)(o,2),c=i[0],l=i[1],d=Object(h.useRef)();Object(h.useEffect)((function(){d.current&&(s(d.current.offsetWidth),l(d.current.offsetHeight))}),[]);var u=p.a.cloneElement(e,{width:n,height:c});return Object(v.jsx)("div",{className:"svgcontainer ".concat(t.styleName),ref:d,children:u})}var w=a(137),S=a(329),C=a(330),k=a(331),P=a(342),D=a(332),A=a(343),W=a(333),N=a(334),_=a(18),T=a.n(_);a(253);function R(t){var e=Object(S.a)(),a=t.wardsAndMonitors.find((function(e){return e.name.toUpperCase()===t.selectedWardOrMonitor.toUpperCase()})),r=[parseFloat(a.lat),parseFloat(a.lon)],n=r[0],s=r[1];return e.setView([n,s],14),null}function F(t){return Object(S.a)().setView([18.502,73.853],12),null}function B(t){Object(w.a)(t);var e=Object(S.a)(),a=function(t){return t?t>250?"#810100":t>120?"#c41206":t>90?"#f58f09":t>60?"#CCA88A":t>30?"#1E5E64":"#50C3CD":"#ededed"};return Object(h.useEffect)((function(){if(e){var t=T.a.control({position:"bottomleft"});t.onAdd=function(){var t,e,r=T.a.DomUtil.create("div","info legend"),n=["NA",0,30,60,90,120,250],s=["Not Available","Good","Satisfactory","Moderate","Poor","Very Poor","Severe"],o=[];o.push("<h5>PM 2.5</h5>");for(var i=0;i<n.length;i++)t=n[i],e=n[i+1],"NA"==n[i]?o.push('<i style="background:'+a(null)+'"></i> '+t+" : &nbsp;&nbsp;"+s[i]):o.push('<i style="background:'+a(t+1)+'"></i> '+t+(e?"&ndash;"+e:"+")+"&nbsp;&nbsp;"+s[i]);return r.innerHTML=o.join("<br>"),r},t.addTo(e)}}),[e]),null}function E(t){var e=[],a=[],r=[],n=[],s=[];if(t.shapes){e=t.shapes.features;for(var o=0;o<e.length;o++)for(var i=e[o].geometry.coordinates[0],c=0;c<i.length;c++)i[c].reverse();e.forEach((function(t,e){var r;a.push(Object(v.jsx)(C.a,{pathOptions:{color:"#777",fillColor:(r=t.properties.average_daily_pm25,r?r>250?"#810100":r>120?"#c41206":r>90?"#f58f09":r>60?"#CCA88A":r>30?"#1E5E64":"#50C3CD":"#ededed"),fillOpacity:.5},positions:t.geometry.coordinates[0],children:Object(v.jsxs)(k.a,{sticky:!0,children:["WARD ",Object(v.jsx)("br",{}),t.properties.name," ",Object(v.jsx)("br",{}),t.properties.name_mr," ",Object(v.jsx)("br",{}),"PM2.5 :  ",Number(parseFloat(t.properties.average_daily_pm25)).toFixed(2)]})},e))}))}if(t.monitors){var l={color:"#3885e7",fillColor:"#3885e7"},d={color:"#c738e7",fillColor:"#c738e7"},u={color:"#1eb708",fillColor:"#1eb708"};t.monitors.filter((function(t){return"iudx"===t.type})).forEach((function(t,e){r.push(Object(v.jsx)(P.a,{center:[t.lat,t.lon],pathOptions:l,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["IUDX Monitor ",Object(v.jsx)("br",{}),t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))})),t.monitors.filter((function(t){return"safar"===t.type})).forEach((function(t,e){n.push(Object(v.jsx)(P.a,{center:[t.lat,t.lon],pathOptions:d,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["Safar Monitor ",Object(v.jsx)("br",{})," ",t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))})),t.monitors.filter((function(t){return"mpcb"===t.type})).forEach((function(t,e){s.push(Object(v.jsx)(P.a,{center:[t.lat,t.lon],pathOptions:u,radius:10,children:Object(v.jsxs)(k.a,{sticky:!0,children:["MPCB Monitor ",Object(v.jsx)("br",{})," ",t.name," ",Object(v.jsx)("br",{}),"PM 2.5 :  ",Number(parseFloat(t.average_daily_pm25)).toFixed(2)]})},e))}))}return Object(v.jsxs)(D.a,{className:"map_tool",scrollWheelZoom:!1,children:[t.panCityView?Object(v.jsx)(F,{features:e}):Object(v.jsx)(R,{wardsAndMonitors:t.monitors,selectedWardOrMonitor:t.selectedWardOrMonitor}),Object(v.jsx)(A.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a,Object(v.jsxs)(W.a,{position:"bottomright",children:[Object(v.jsx)(W.a.Overlay,{checked:"IUDX"===t.selectedMode.type&&!t.panCityView,name:"Smart City Monitors",children:Object(v.jsx)(N.a,{children:r})}),Object(v.jsx)(W.a.Overlay,{checked:"SAFAR"===t.selectedMode.type&&!t.panCityView,name:"Safar Monitors",children:Object(v.jsx)(N.a,{children:n})}),Object(v.jsx)(W.a.Overlay,{checked:"MPCB"===t.selectedMode.type&&!t.panCityView,name:"MPCB Monitors",children:Object(v.jsx)(N.a,{children:s})})]}),Object(v.jsx)(B,{})]})}var V=a(10);function H(t){var e=t.width,a=t.height,r=Object(h.useRef)(null),n=e,s=n/4,o=a,i=[];if(t.wardOrMonitorSummary.length>0){var c=t.wardOrMonitorSummary[0];i=[{index:0,metric:c.num_missing_days,tag:"days of missing data"},{index:1,metric:c.pollution_rank.toString()+"/"+c.num_units.toString(),tag:"highest pollution"},{index:2,metric:c.count_exceeds_threshold,tag:"number of days exceeding threshold of 30 PM2.5"}]}function l(t,e){t.each((function(){for(var t,a=V.l(this),r=a.text().split(/\s+/).reverse(),n=[],s=0,o=a.attr("y"),i=parseFloat(a.attr("dy")),c=a.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",i+"em");t=r.pop();)n.push(t),c.text(n.join(" ")),c.node().getComputedTextLength()>e&&(n.pop(),c.text(n.join(" ")),n=[t],c=a.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++s+i+"em").text(t))}))}return console.log("SUMMARY RECORD",i),Object(h.useEffect)((function(){var t=V.l(r.current);t.selectAll("*").remove();var c=o+100;t.attr("viewBox","0 0 "+n+" "+c);var d=V.i().domain(i.map((function(t){return t.index}))).range([s,e]);if(o>0){var u=V.i().domain(i.map((function(t){return t.tag}))).range([0,n]).padding(.2),h=V.b(u);t.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(h).selectAll(".tick text").style("font-size","18px").call(l,u.bandwidth());var p=t.append("g");p.selectAll("circle").data(i).join("circle").attr("cx",(function(t){return u(t.tag)+d.bandwidth()/2})).attr("cy",a/2).attr("r",(function(t){return 90})).attr("fill","#7df9ff"),p.selectAll("text").data(i).join("text").attr("dx",(function(t){return"highest pollution"===t.tag?u(t.tag)+u.bandwidth()/2-52:u(t.tag)+u.bandwidth()/2-40})).attr("dy",a/1.8).text((function(t){return t.metric})).attr("fill","#606161").style("font-size",(function(t){return"highest pollution"===t.tag?"40px":"50px"}))}})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:a,ref:r})]})}function z(t){var e=t.width,a=t.height,r=Object(h.useRef)(null),n=e,s=a,o=10,i=10,c=t.rankedWards,l=[{label:"Lowest",color:"#50C3CD"},{label:"Highest",color:"#BD762D"}];function d(t,e){t.each((function(){for(var t,a=V.l(this),r=a.text().split(/\s+/).reverse(),n=[],s=0,o=a.attr("y"),i=parseFloat(a.attr("dy")),c=a.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",i+"em");t=r.pop();)n.push(t),c.text(n.join(" ")),c.node().getComputedTextLength()>e&&(n.pop(),c.text(n.join(" ")),n=[t],c=a.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++s+i+"em").text(t))}))}c=c.sort((function(t,e){return t.best-e.best}));return Object(h.useEffect)((function(){var t=V.l(r.current);t.selectAll("*").remove();var a=s+20,u=V.i().domain(c.map((function(t){return t.name}))).range([0,n-i]).padding(.2),h=V.j().domain([0,V.g(c,(function(t){return Number(t.Average_pm25)}))]).range([s,4*o]);t.attr("viewBox","-30 10 "+n+" "+a);var p=V.b(u);if(s>0){t.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p).selectAll(".tick text").call(d,u.bandwidth());var f=V.c(h);t.append("g").call(f),t.append("text").attr("class","y label").attr("text-anchor","start").attr("x",-250).attr("y",-4*o).attr("dy",".75em").attr("fill","#7c7c7c").attr("transform","rotate(-90)").text("Average PM 2.5"),t.selectAll("mybar").data(c).enter().append("rect").attr("x",(function(t){return u(t.name)})).attr("y",(function(t){return h(Number(t.Average_pm25))})).attr("width",u.bandwidth()).attr("height",(function(t){return s-h(Number(t.Average_pm25))})).attr("fill",(function(t){return t.best<4?"#50C3CD":"#BD762D"})),function(t){var a=n/(l.length+1),r=V.j().domain([0,Object.keys(l).length-1]).range([a,e-a]);t.append("g").attr("transform","translate(0,"+s+")").selectAll("text").data(l).join("text").attr("x",(function(t,e){return r(e)})).attr("y",2*o-s).attr("dy","0.5em").text((function(t){return t.label})).attr("font-size","18px").attr("font-weight","bold").attr("fill",(function(t){return t.color}))}(t)}})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:a,ref:r})]})}function I(t){var e=t.width,a=t.height,r=Object(h.useRef)(null),n=e,s=a,o=10,i=10,c=null,l=null,d=null,u=null,p=null,f=null,m=null;return Object(h.useEffect)((function(){l=t.pollutantHistory,t.panCityView?(d=l.filter((function(t){return"iudx"===t.type})),u=l.filter((function(t){return"safar"===t.type})),p=l.filter((function(t){return"ward"===t.type})),c=l.map((function(t){return new Date(t.Month_Year)}))):(f=l.filter((function(t){return 2021===t.Year})),m=l.filter((function(t){return 2022===t.Year})),c=l.map((function(t){return new Date(t.Month_Year)})));var e=V.l(r.current);e.selectAll("*").remove();var a=s+20,h=V.k().domain(V.d(c)).nice().range([0,n-i]),b=V.j().domain([0,V.g(l,(function(t){return Number(t.monthly_average_pm25)}))]).range([s,20]);e.attr("viewBox","-30 10 "+n+" "+a),s>0&&(e.append("g").attr("transform","translate(0,"+s+")").call(V.b(h)),e.append("g").call(V.c(b)),e.append("text").attr("class","y label").attr("text-anchor","start").attr("x",-250).attr("y",-4*o).attr("dy",".75em").attr("fill","#7c7c7c").attr("transform","rotate(-90)").text("Monthly Average PM 2.5"),e.append("line").attr("fill","none").attr("stroke","#D81B60").attr("stroke-width",2.5).attr({x1:h(V.h(c)),y1:b(35),x2:h(V.g(c)),y2:b(35)}),t.panCityView?function(t,e,a){t.append("path").datum(d).attr("fill","none").attr("stroke","#D81B60").attr("stroke-width",2.5).attr("d",V.e().x((function(t){return e(new Date(t.Month_Year))})).y((function(t){return a(Number(t.monthly_average_pm25))}))),t.append("path").datum(u).attr("fill","none").attr("stroke","#1E88E5").attr("stroke-width",2.5).attr("d",V.e().x((function(t){return e(new Date(t.Month_Year))})).y((function(t){return a(Number(t.monthly_average_pm25))}))),t.append("path").datum(p).attr("fill","none").attr("stroke","#004D40").attr("stroke-width",2.5).attr("d",V.e().x((function(t){return e(new Date(t.Month_Year))})).y((function(t){return a(Number(t.monthly_average_pm25))})))}(e,h,b):function(t,e,a){t.append("path").datum(f).attr("fill","none").attr("stroke","red").attr("stroke-width",2.5).attr("d",V.e().x((function(t){return e(new Date(t.Month_Year))})).y((function(t){return a(Number(t.monthly_average_pm25))}))),t.append("path").datum(m).attr("fill","none").attr("stroke","green").attr("stroke-width",2.5).attr("d",V.e().x((function(t){return e(new Date(t.Month_Year))})).y((function(t){return a(Number(t.monthly_average_pm25))})))}(e,h,b))})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:a,ref:r})]})}var U=a(93);function Y(t){var e=t.width,a=t.height,r=Object(h.useRef)(null),n=e,s=a,o=10,i=10,c=["#4477AA","#EE6677","#228833","#CCBB44","#66CCEE","#AA3377","#BBBBBB"],l=null,d=[];return Object(h.useEffect)((function(){l=t.pollutantHistory;var e=V.l(r.current);e.selectAll("*").remove();var a=s+20,u=V.f(l,(function(t,e){return t.Month})),h=V.i(new V.a(u),[0,n-i]),p=V.j().domain([V.h(l,(function(t){return Number(t.monthly_average_pm25)}))-2,V.g(l,(function(t){return Number(t.monthly_average_pm25)}))]).range([s,4*o]);e.attr("viewBox","-30 -2 "+n+" "+a),s>0&&(e.append("g").attr("transform","translate(0,"+s+")").call(V.b(h)),e.append("g").call(V.c(p)),e.append("text").attr("class","y label").attr("text-anchor","start").attr("x",-250).attr("y",-4*o).attr("dy",".75em").attr("fill","#7c7c7c").attr("transform","rotate(-90)").text("Monthly Average PM 2.5"),function(t,e,a){for(var r=Object(U.a)(new Set(V.f(l,(function(t,e){return t.Year})))),n=function(n){var s=l.filter((function(t){return t.Year===r[n]}));s=s.sort((function(t,e){return t.month_number-e.month_number})),t.append("path").datum(s).attr("fill","none").attr("stroke",c[n]).attr("stroke-width",1).attr("d",V.e().x((function(t){return e(t.Month)+e.bandwidth()/2})).y((function(t){return a(Number(t.monthly_average_pm25))}))),t.append("g").selectAll("circle").data(s).enter().append("circle").attr("fill",c[n]).attr("stroke",c[n]).attr("stroke-width",1).attr("r",3).attr("cx",(function(t){return e(t.Month)+e.bandwidth()/2})).attr("cy",(function(t){return a(Number(t.monthly_average_pm25))})),d.push({label:r[n].toString(),color:c[n]})},s=0;s<r.length;s++)n(s)}(e,h,p),function(t){var e=d.length+1,a=n/e,r=V.j().domain([0,Object.keys(d).length-1]).range([a,n-a]);t.append("g").attr("transform","translate(0,"+s+")").selectAll("text").data(d).join("text").attr("x",(function(t,e){return r(e)})).attr("y",2*o-s).attr("dy","0.5em").text((function(t){return t.label})).attr("font-size","18px").attr("font-weight","bold").attr("fill",(function(t){return t.color}))}(e))})),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"vizTitle",children:t.title}),Object(v.jsx)("svg",{width:e,height:a,ref:r})]})}var q=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var r;return Object(c.a)(this,a),(r=e.call(this,t)).state={pollutantHistory:[]},r}return Object(l.a)(a,[{key:"getPollutantHistory",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=x,a={method:"GET",headers:{"Content-Type":"application/json"},body:null},t.next=4,fetch(e,a);case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,console.log(" * * * * POLLUTANT HISTORY * * * * ",n),this.setState({pollutantHistory:n.data,loading:!1});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getPollutantHistory()}},{key:"render",value:function(){var t=this,e=[],a="WARD";void 0!==this.props.wardPolygons.data&&(e=this.props.wardPolygons.data.filter((function(e){return e.type.toUpperCase()===t.props.selectedMode.type.toUpperCase()})),a="WARD"===this.props.selectedMode.type?"ward":"monitor");var r=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"text_n_map",children:[Object(v.jsxs)("div",{className:"textTool display-linebreak",children:["This dashboard reports PM 2.5 from various data sources available in Pune. The "+this.props.selectedMode.name+" data is collected by "+e.length+" "+a+"s all across Pune.\n",Object(v.jsx)("span",{style:{fontStyle:"italic"},children:" To know more, select your "+a+" from the dropdown above.\n"}),Object(v.jsx)("br",{}),"PM 2.5 (particulate matter), an air pollutant, is very harmful to our health. It not only enters our lungs, but can also enter our bloodstream and affect many of our vital organs like the heart, brain and kidneys."]}),Object(v.jsx)("div",{className:"mapBaap",children:Object(v.jsx)(E,{panCityView:this.props.panCityView,shapes:this.props.wardPolygons.shapes,monitors:this.props.wardPolygons.data,selectedMode:this.props.selectedMode,selectedWardOrMonitor:this.props.selectedWardOrMonitor})})]}),Object(v.jsxs)("div",{className:"bar_n_line",children:[this.props.panCityView?Object(v.jsx)(M,{children:Object(v.jsx)(z,{title:"Top 3 "+("WARD"===this.props.selectedMode.type?"wards":"monitors")+" showing the lowest to highest levels of pm2.5",rankedWards:this.props.rankedWards})}):Object(v.jsx)(M,{children:Object(v.jsx)(H,{title:this.props.selectedWardOrMonitor,selectedMode:this.props.selectedMode,selectedWardOrMonitor:this.props.selectedWardOrMonitor,wardOrMonitorSummary:this.props.wardOrMonitorSummary})}),this.props.panCityView?Object(v.jsx)(M,{children:Object(v.jsx)(I,{title:"PM2.5 for PAN CITY VIEW",pollutantHistory:this.state.pollutantHistory,panCityView:this.props.panCityView})}):Object(v.jsx)(M,{children:Object(v.jsx)(Y,{title:"PM2.5 history for "+this.props.selectedMode.type+" "+this.props.selectedWardOrMonitor,pollutantHistory:this.props.wardOrMonitorHistory,panCityView:this.props.panCityView})})]})]});return Object(v.jsx)("div",{className:"vizpanel",children:r})}}]),a}(p.a.Component),L=a.p+"static/media/ParisarLogo.a617d95d.png",Q=a(337),J=a(339),G=a(338),X=a(340),Z=a(335),K=a(336),$=a(118),tt=a(117),et=a.n(tt),at=(a(254),[{name:"Satellite Based",type:"WARD"},{name:"Smart City",type:"IUDX"},{name:"SAFAR",type:"SAFAR"},{name:"MPCB",type:"MPCB"}]),rt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var r;return Object(c.a)(this,a),(r=e.call(this,t)).unitSelectRef=null,r.pollutantSelectRef=null,r.setStartDate=function(t){r.props.setStartDate(t)},r.setEndDate=function(t){r.props.setEndDate(t)},r.setSelectedMode=function(t,e){var a=at.find((function(e){return e.name===t.target.value}));r.props.setSelectedMode(a),r.unitSelectRef.state.selectValue.length>0&&r.unitSelectRef.clearValue();var n=r.filterWardsAndMonitors(a);r.setState({selectedDataSourceId:e,filteredMonitors:n})},r.setSelectedWardOrMonitor=function(t){r.props.setSelectedWardOrMonitor(t),r.props.handlePanCityView()},r.state={selectedDataSourceId:0,filteredMonitors:[],wardsAndMonitors:[]},r}return Object(l.a)(a,[{key:"getWardsAndMonitors",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=O,a={method:"GET",headers:{"Content-Type":"application/json"},body:null},t.next=4,fetch(e,a);case 4:return r=t.sent,t.next=7,r.json();case 7:return n=t.sent,console.log(" * * * * WARDS AND MONITORS * * * * ",n),this.setState({wardsAndMonitors:n.data}),t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"filterWardsAndMonitors",value:function(t){return this.state.wardsAndMonitors.filter((function(e){return e.type===t.type}))}},{key:"componentDidMount",value:function(){var t=this;this.state.startDate&&this.state.startDate.setHours(1*this.state.startDate.getTimezoneOffset()/60),this.getWardsAndMonitors().then((function(e){var a=t.filterWardsAndMonitors(at[t.state.selectedDataSourceId]);t.setState({filteredMonitors:a})}))}},{key:"render",value:function(){var t=this,e=Object(v.jsx)(v.Fragment,{children:at.map((function(e,a){return Object(v.jsx)(Z.a,{style:{fontSize:"12px"},value:e.name,onClick:function(e){return t.setSelectedMode(e,a)},active:a===t.state.selectedDataSourceId,children:e.name},a)}))});return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"controlpanel",children:[Object(v.jsxs)("div",{className:"controlPanelSection1",children:[this.props.panCityView?Object(v.jsxs)("div",{className:"panCityControl",style:{zIndex:999},children:[Object(v.jsx)(K.a,{size:"sm",className:"cp-section1items",children:e}),Object(v.jsx)($.a,{ref:function(e){t.unitSelectRef=e},className:"cp-section1items datasource-select",placeholder:"Select a ward or monitor",options:this.state.filteredMonitors,onChange:this.setSelectedWardOrMonitor})]}):Object(v.jsxs)("div",{className:"panCityControl",children:[Object(v.jsx)(Z.a,{variant:"link",onClick:this.props.handlePanCityView,children:"PUNE"}),Object(v.jsx)("div",{children:"/ "+at[this.state.selectedDataSourceId].type+"  : "+this.props.selectedWardOrMonitor})]}),Object(v.jsx)($.a,{ref:function(e){t.pollutantSelectRef=e},className:"cp-section1items",placeholder:"Select a pollutant"})]}),Object(v.jsxs)("div",{className:"controlPanelSection2",children:[Object(v.jsx)(et.a,{wrapperClassName:"cp-section2items",dateFormat:"yyyy/MM/dd",selected:this.props.startDate,onChange:function(e){return t.setStartDate(e)}}),Object(v.jsx)("label",{className:"cp-section2items",children:" - "}),Object(v.jsx)(et.a,{wrapperClassName:"cp-section2items",dateFormat:"yyyy/MM/dd",selected:this.props.endDate,onChange:function(e){return t.setEndDate(e)}}),Object(v.jsx)(Z.a,{variant:"dark",size:"sm",className:"cp-section2items",onClick:this.props.updateDates,children:"Update"})]})]})})}}]),a}(p.a.Component),nt=a(341),st=function(t){var e=Object(h.useState)(!0),a=Object(g.a)(e,2),r=a[0],n=a[1],s=Object(h.useState)(!1),o=Object(g.a)(s,2),i=o[0],c=o[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(Z.a,{style:{color:"#606161",backgroundColor:"#F8F9F9",borderColor:"#F8F9F9"},onClick:function(){return n(!0),void c(!0)},children:"FAQs"}),Object(v.jsxs)(nt.a,{show:i,fullscreen:r,onHide:function(){return c(!1)},children:[Object(v.jsx)(nt.a.Header,{closeButton:!0,children:Object(v.jsx)(nt.a.Title,{children:"Frequently Asked Questions"})}),Object(v.jsxs)(nt.a.Body,{children:[Object(v.jsx)("h4",{children:"What is Air Quality Index (AQI)? "}),Object(v.jsx)("p",{children:"The Air Quality Index is a way of measuring air pollution, by taking into account the presence of different pollutants in air like particulate matter (PM 2.5, PM 10), Ozone, CO, SOx and NOx. In India, we follow a 500 point scale to show the degree of air pollution and take into account 5 major pollutants namely PM2.5, PM10, CO, Ozone and NO2."}),Object(v.jsx)("h4",{children:"Is Pune's air polluted?"})," ",Object(v.jsxs)("p",{children:["Pune is one of the 132 nonattainment cities declared under the National Clean Air Programme. This means that the air quality in Pune does not conform to the National Ambient Air Quality Standards prescribed by the Central Board of Pollution Control. The National Clean Air Programme was launched in 2019 by the Ministry of Environment, Forest and Climate Change, which made it mandatory for the nonattainment cities to prepare air action plans. The objective of these plans was to reduce the PM 2.5 pollution by 30-40% till 2024 (with 2017 as the base). Accordingly, Pune has prepared an air action plan, and is currently being implemented."," "]}),Object(v.jsx)("h4",{children:"Where is all this data coming from? "}),Object(v.jsxs)("p",{children:["The dashboard displays air quality data from four sources, as follows",Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:"Satellite based data - This data is being plugged in from the Blue Sky Analytics, capturing PM 2.5 data based on a grid of 1km x 1km. This data is being used to create the base map of Pune constituting the 41 administrative wards."}),Object(v.jsxs)("li",{children:["Pune Smart City Monitors - The data from 50 low cost monitors, spread all over Pune, is being displayed. While the dashboard only shows PM 2.5 readings, these monitors capture a range of other pollutants like PM 10, sulphur dioxide , nitrogen dioxide, carbon monoxide and ozone."," "]}),Object(v.jsx)("li",{children:"SAFAR - Short for System of Air Quality and Weather Forecasting And Research, this application provides data from seven monitors installed by the Institute of Tropical Meteorology in Pune. This data is used by the Pune Municipal Corporation to prepare its Environmental Status Report every year. Apart from PM 2.5, which is being displayed on this dashboard, these monitors capture pollutants like PM 10 and Ozone."})," ",Object(v.jsx)("li",{children:"MPCB - Short for Maharashtra Pollution Control Board, this data is captured by the five monitors set up by the board in Pune. Apart from PM2.5, these monitors capture data on other pollutants, namely SOx, NOx and PM 10."})]})]}),Object(v.jsx)("h4",{children:"Why focus on PM 2.5?"})," ",Object(v.jsxs)("p",{children:["While air pollution affects our health, particulate matter pollution is most hazardous. These minute particles not only enter and damage our lungs, but can also enter the bloodstream, thereby affecting other vital organs like the heart, kidney and even the brain. Increased exposure to high PM 2.5 levels can cause asthma, chronic obstructive pulmonary disorder, bronchitis, heart disease, alzheimers, kidney disorders and so on. Where does PM 2.5 come from? Main sources of PM 2.5 in urban areas are vehicular emissions, coal/ natural gas fired power plants, and burning."," "]}),Object(v.jsx)("h4",{children:"What is being done to improve Pune's air quality? "}),Object(v.jsx)("p",{children:"Pune has prepared the Air Action Plan as mandated by the NCAP. The plan has different actions related to transport, waste management, greening etc to improve air quality."}),Object(v.jsx)("h4",{children:"What can you do with this dashboard?"}),Object(v.jsx)("p",{children:"This dashboard is a tool to understand air pollution in Pune in a simple manner. The variety of data sources allows you to find out ward specific pollution, something which can be taken up with your local corporator or PMC in order to improve air quality. The dashboard can also be used as a learning tool by different schools to introduce and understand the issue of air pollution."})]})]})]})},ot=a(48),it=a(97),ct=a(98),lt=function(){var t=Object(h.useState)(!1),e=Object(g.a)(t,2),a=e[0],r=e[1];return ot.b.add(ct.b,ct.a,ct.c),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Z.a,{style:{color:"#606161",backgroundColor:"#F8F9F9",borderColor:"#F8F9F9"},onClick:function(){return r(!0)},children:"Contact Us"}),Object(v.jsxs)(nt.a,{size:"lg",show:a,onHide:function(){return r(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:[Object(v.jsxs)(nt.a.Header,{closeButton:!0,style:{display:"flex"},children:[Object(v.jsx)(nt.a.Title,{id:"example-modal-sizes-title-lg",style:{flex:1},children:"Reach out to us"}),Object(v.jsxs)("span",{children:[Object(v.jsx)("a",{href:"https://www.instagram.com/parisar_org/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-instagram",fixedWidth:!0})}),Object(v.jsx)("a",{href:"https://twitter.com/parisarpune",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-twitter",fixedWidth:!0})}),Object(v.jsx)("a",{href:"https://www.facebook.com/ParisarUrbanTransport/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(it.a,{size:"xl",icon:"fa-brands fa-facebook",fixedWidth:!0,className:"facebook"})})]})]}),Object(v.jsxs)(nt.a.Body,{children:["Please send us your questions"," ",Object(v.jsx)("a",{href:"https://parisar.org/contact-us",target:"_blank",rel:"noreferrer",children:"here"}),"."]})]})]})},dt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var r;return Object(c.a)(this,a),(r=e.call(this,t)).updateDates=function(t){r.get_pm25Ranks(),""!==r.state.selectedWardOrMonitor&&(r.getWardOrMonitorHistory(),r.getWardOrMonitorSummary())},r.handleAlerts=function(t){r.setState({alert:{alertMessage:"",alertRaised:t}})},r.handlePanCityView=function(){r.setState({panCityView:!r.state.panCityView})},r.setSelectedWardOrMonitor=function(t){r.setState({selectedWardOrMonitor:t.value})},r.state={selectedMode:{name:"Satellite Based",type:"WARD"},selectedWardOrMonitor:"",panCityView:!0,wardOrMonitorHistory:[],wardOrMonitorSummary:[],wardPolygons:[],rankedWards:[],startDate:new Date("2021-04-24"),endDate:new Date,alert:{alertRaised:!1,alertMessage:""}},r}return Object(l.a)(a,[{key:"get_pm25Ranks",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",a={startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode.type},r=m,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t.next=6,fetch(r,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * Ranked "+this.state.selectedMode.name+" received from db * * * * ",i),"success"===i.status?this.setState({rankedWards:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardOrMonitorHistory",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",a={startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode.type,selectedWardOrMonitor:this.state.selectedWardOrMonitor},r=b,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t.next=6,fetch(r,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * History for "+a.selectedMode+a.selectedWardOrMonitor+" received from db * * * * ",i),"success"===i.status?this.setState({wardOrMonitorHistory:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected monitor or ward or the date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardPolygons",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.state.wardPolygons,101===this.state.wardPolygons.length){t.next=13;break}return a=new Date("2021-06-06"),r={date1:a.toISOString().split("T")[0],categories:["iudx","safar","ward","mpcb"]},n=j,s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},t.next=8,fetch(n,s);case 8:return i=t.sent,t.next=11,i.json();case 11:e=t.sent,console.log(" * * * * POLYGONS with pollutants received from db * * * * ",e);case 13:this.setState({wardPolygons:e});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWardOrMonitorSummary",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,a,r,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",a={startDate:this.state.startDate.toISOString().split("T")[0],endDate:this.state.endDate.toISOString().split("T")[0],selectedMode:this.state.selectedMode.type,selectedWardOrMonitor:this.state.selectedWardOrMonitor},r=y,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t.next=6,fetch(r,n);case 6:return s=t.sent,t.next=9,s.json();case 9:i=t.sent,console.log(" * * * * Summary for "+this.state.selectedWardOrMonitor+" received from db * * * * ",i),"success"===i.status?this.setState({wardOrMonitorSummary:i.data}):("No data found in DB"===i.message&&(e="Sorry! We do not have the data for the selected date ranges. Please try changing them."),this.setState({alert:{alertMessage:e,alertRaised:!0}}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.get_pm25Ranks(),this.getWardPolygons()}},{key:"componentDidUpdate",value:function(t,e){this.state.selectedMode!==e.selectedMode&&this.get_pm25Ranks(),this.state.selectedWardOrMonitor!==e.selectedWardOrMonitor&&""!==this.state.selectedWardOrMonitor&&(this.getWardOrMonitorHistory(),this.getWardOrMonitorSummary())}},{key:"render",value:function(){var t=this,e=Object(v.jsxs)(v.Fragment,{children:[this.state.alert.alertRaised?Object(v.jsxs)(Q.a,{variant:"danger",onClose:function(){return t.handleAlerts(!1)},dismissible:!0,children:[Object(v.jsx)(Q.a.Heading,{children:"Oh snap! You got an error!"}),Object(v.jsx)("p",{children:this.state.alert.alertMessage})]}):null,Object(v.jsx)(rt,{panCityView:this.state.panCityView,updateDates:this.updateDates,startDate:this.state.startDate,endDate:this.state.endDate,selectedWardOrMonitor:this.state.selectedWardOrMonitor,setSelectedMode:function(e){t.setState({selectedMode:e,selectedWardOrMonitor:""})},setSelectedWardOrMonitor:this.setSelectedWardOrMonitor,handlePanCityView:this.handlePanCityView,setStartDate:function(e){return t.setState({startDate:e})},setEndDate:function(e){return t.setState({endDate:e})}}),Object(v.jsx)(q,{startDate:this.state.startDate,endDate:this.state.endDate,selectedMode:this.state.selectedMode,panCityView:this.state.panCityView,selectedWardOrMonitor:this.state.selectedWardOrMonitor,rankedWards:this.state.rankedWards,wardOrMonitorHistory:this.state.wardOrMonitorHistory,wardOrMonitorSummary:this.state.wardOrMonitorSummary,wardPolygons:this.state.wardPolygons})]});return Object(v.jsxs)("div",{className:"parentdiv",children:[Object(v.jsx)(J.a,{bg:"light",children:Object(v.jsxs)(G.a,{children:[Object(v.jsxs)(J.a.Brand,{children:[Object(v.jsx)("img",{alt:"",src:L,className:"logo"}),Object(v.jsx)("span",{className:"websiteName",children:"Air Quality Dashboard"})]}),Object(v.jsxs)(X.a,{className:"justify-content-end",children:[Object(v.jsx)(st,{}),Object(v.jsx)(lt,{})]})]})}),Object(v.jsx)("div",{className:"content",children:e})]})}}]),a}(p.a.Component);n.a.render(Object(v.jsx)(dt,{}),document.getElementById("root"))}},[[319,1,2]]]);
//# sourceMappingURL=main.4a4bfe8d.chunk.js.map